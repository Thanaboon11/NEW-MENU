<!DOCTYPE html>
<html lang="th">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>‡∏£‡∏∞‡∏ö‡∏ö‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Kanit:wght@300;400;500;600;700&display=swap');
        body { font-family: 'Kanit', sans-serif; }
        
        .fade-in { animation: fadeIn 0.5s ease-in; }
        @keyframes fadeIn { 
            from { opacity: 0; transform: translateY(20px); } 
            to { opacity: 1; transform: translateY(0); } 
        }
        
        .slide-up { animation: slideUp 0.3s ease-out; }
        @keyframes slideUp { 
            from { transform: translateY(100%); opacity: 0; } 
            to { transform: translateY(0); opacity: 1; } 
        }
        
        .bounce-in { animation: bounceIn 0.6s ease-out; }
        @keyframes bounceIn { 
            0% { transform: scale(0.3); opacity: 0; } 
            50% { transform: scale(1.05); } 
            70% { transform: scale(0.9); } 
            100% { transform: scale(1); opacity: 1; } 
        }
        
        .pulse-notification { animation: pulse 1s infinite; }
        @keyframes pulse { 
            0%, 100% { transform: scale(1); } 
            50% { transform: scale(1.05); } 
        }
        
        .menu-item { transition: all 0.3s ease; }
        .menu-item:hover { transform: translateY(-5px); box-shadow: 0 10px 25px rgba(0,0,0,0.1); }
        
        .cart-item { transition: all 0.3s ease; }
        .cart-item:hover { background-color: #f8fafc; }
        
        .status-pending { background: linear-gradient(135deg, #fbbf24, #f59e0b); }
        .status-preparing { background: linear-gradient(135deg, #3b82f6, #2563eb); }
        .status-delivering { background: linear-gradient(135deg, #8b5cf6, #7c3aed); }
        .status-completed { background: linear-gradient(135deg, #10b981, #059669); }
        
        .order-card { 
            transition: all 0.3s ease; 
            border-left: 4px solid transparent;
        }
        .order-card:hover { transform: translateY(-2px); }
        .order-card.pending { border-left-color: #f59e0b; }
        .order-card.preparing { border-left-color: #2563eb; }
        .order-card.delivering { border-left-color: #7c3aed; }
        .order-card.completed { border-left-color: #059669; }
        
        .image-preview {
            width: 100px;
            height: 100px;
            object-fit: cover;
            border-radius: 8px;
        }
        
        .notification-toast {
            animation: slideInRight 0.5s ease-out;
        }
        
        @keyframes slideInRight {
            from { transform: translateX(100%); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
        
        .cart-badge {
            animation: cartBounce 0.3s ease-out;
        }
        
        @keyframes cartBounce {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.2); }
        }

        .receipt-section {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            border-radius: 15px;
            padding: 20px;
            margin: 15px 0;
            color: white;
        }

        .qr-code-section {
            background: white;
            border-radius: 10px;
            padding: 15px;
            text-align: center;
            margin-top: 15px;
        }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <!-- Login Modal -->
    <div id="loginModal" class="fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center">
        <div class="bg-white rounded-2xl p-8 max-w-md w-full mx-4 bounce-in">
            <div class="text-center mb-6">
                <div class="text-6xl mb-4">üîê</div>
                <h2 class="text-2xl font-bold text-gray-800">‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö</h2>
                <p class="text-gray-600 mt-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
            </div>
            
            <div class="space-y-4">
                <button onclick="loginAsCustomer()" class="w-full bg-gradient-to-r from-orange-400 to-orange-500 text-white py-4 rounded-xl hover:from-orange-500 hover:to-orange-600 transition-all font-semibold text-lg">
                    üë• ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤
                </button>
                
                <div class="border-t pt-4">
                    <input type="password" id="ownerPassword" placeholder="‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none mb-3">
                    <button onclick="loginAsOwner()" class="w-full bg-gradient-to-r from-blue-400 to-blue-500 text-white py-4 rounded-xl hover:from-blue-500 hover:to-blue-600 transition-all font-semibold text-lg">
                        üë®‚Äçüíº ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô
                    </button>
                    <p class="text-xs text-gray-500 mt-2 text-center">‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô: 1234</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Customer Interface -->
    <div id="customerInterface" class="hidden">
        <!-- Header -->
        <header class="bg-white shadow-lg sticky top-0 z-40">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <div class="text-3xl">üçΩÔ∏è</div>
                        <div>
                            <h1 class="text-2xl md:text-3xl font-bold text-orange-600" id="customerRestaurantName">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏£‡πà‡∏≠‡∏¢</h1>
                            <p class="text-gray-600 text-sm">‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏≠‡∏ô‡πÑ‡∏•‡∏ô‡πå</p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <button onclick="showMyOrders()" class="relative bg-blue-500 text-white px-4 py-2 rounded-lg hover:bg-blue-600 transition-colors">
                            üìã ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô
                            <span id="myOrdersBadge" class="hidden absolute -top-2 -right-2 bg-red-500 text-white text-xs rounded-full w-5 h-5 flex items-center justify-center">0</span>
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Special Features Section -->
        <div class="bg-gradient-to-r from-purple-500 to-pink-500 text-white py-8">
            <div class="container mx-auto px-4">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold mb-2">üåü ‡∏à‡∏∏‡∏î‡πÄ‡∏î‡πà‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©</h2>
                    <p class="text-purple-100">‡∏£‡∏∞‡∏ö‡∏ö‡∏ä‡πà‡∏ß‡∏¢‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡πÉ‡∏Ñ‡∏£ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ñ‡∏∏‡∏ì‡∏†‡∏≤‡∏û</p>
                </div>
                
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <button onclick="openRecipeGuide()" class="bg-white bg-opacity-20 backdrop-blur-sm rounded-xl p-6 hover:bg-opacity-30 transition-all text-center">
                        <div class="text-4xl mb-3">üìã</div>
                        <h3 class="text-xl font-bold mb-2">‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h3>
                        <p class="text-purple-100 text-sm">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÅ‡∏•‡∏∞‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô</p>
                    </button>
                    
                    <button onclick="openPortionCalculator()" class="bg-white bg-opacity-20 backdrop-blur-sm rounded-xl p-6 hover:bg-opacity-30 transition-all text-center">
                        <div class="text-4xl mb-3">üßÆ</div>
                        <h3 class="text-xl font-bold mb-2">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°</h3>
                        <p class="text-purple-100 text-sm">‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏õ‡∏£‡∏¥‡∏°‡∏≤‡∏ì‡∏ï‡∏≤‡∏°‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô</p>
                    </button>
                    
                    <button onclick="openPartyPlanner()" class="bg-white bg-opacity-20 backdrop-blur-sm rounded-xl p-6 hover:bg-opacity-30 transition-all text-center">
                        <div class="text-4xl mb-3">üéâ</div>
                        <h3 class="text-xl font-bold mb-2">‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ</h3>
                        <p class="text-purple-100 text-sm">‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÄ‡∏°‡∏ô‡∏π‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏á‡∏≤‡∏ô‡πÄ‡∏•‡∏¥‡πâ‡∏¢‡∏á</p>
                    </button>
                </div>
            </div>
        </div>

        <!-- Menu Section -->
        <main class="container mx-auto px-4 py-6">
            <div class="mb-6">
                <h2 class="text-2xl font-bold text-gray-800 mb-4">üçΩÔ∏è ‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
                <div id="customerMenuList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                    <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                </div>
                
                <div id="noMenuCustomer" class="text-center py-12">
                    <div class="text-6xl mb-4">üçΩÔ∏è</div>
                    <p class="text-gray-500 text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π</p>
                    <p class="text-gray-400 text-sm mt-2">‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏£‡∏≠‡∏™‡∏±‡∏Å‡∏Ñ‡∏£‡∏π‡πà...</p>
                </div>
            </div>
        </main>


    </div>

    <!-- Owner Interface -->
    <div id="ownerInterface" class="hidden">
        <!-- Header -->
        <header class="bg-white shadow-lg sticky top-0 z-40">
            <div class="container mx-auto px-4 py-4">
                <div class="flex justify-between items-center">
                    <div class="flex items-center space-x-4">
                        <div class="text-3xl">üë®‚Äçüíº</div>
                        <div>
                            <h1 class="text-2xl md:text-3xl font-bold text-blue-600">‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô</h1>
                            <p class="text-gray-600 text-sm">‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡πâ‡∏≤‡∏ô <span id="ownerRestaurantName">‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏≠‡∏£‡πà‡∏≠‡∏¢</span></p>
                        </div>
                    </div>
                    <div class="flex items-center space-x-3">
                        <div class="flex items-center space-x-2 bg-green-100 px-3 py-2 rounded-lg">
                            <span class="w-3 h-3 bg-green-500 rounded-full animate-pulse"></span>
                            <span class="text-green-800 text-sm font-semibold">Online</span>
                        </div>
                        <button onclick="logout()" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                            üö™ ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                        </button>
                    </div>
                </div>
            </div>
        </header>

        <!-- Stats Cards -->
        <div class="container mx-auto px-4 py-6">
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8">
                <div class="bg-gradient-to-r from-green-400 to-green-500 text-white rounded-2xl p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-green-100 text-sm">‡∏¢‡∏≠‡∏î‡∏Ç‡∏≤‡∏¢‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                            <p class="text-3xl font-bold" id="todaySales">0 ‡∏ø</p>
                        </div>
                        <div class="text-4xl opacity-80">üí∞</div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-blue-400 to-blue-500 text-white rounded-2xl p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-blue-100 text-sm">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ß‡∏±‡∏ô‡∏ô‡∏µ‡πâ</p>
                            <p class="text-3xl font-bold" id="todayOrders">0</p>
                        </div>
                        <div class="text-4xl opacity-80">üìã</div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-orange-400 to-orange-500 text-white rounded-2xl p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-orange-100 text-sm">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</p>
                            <p class="text-3xl font-bold" id="pendingOrders">0</p>
                        </div>
                        <div class="text-4xl opacity-80">‚è≥</div>
                    </div>
                </div>
                
                <div class="bg-gradient-to-r from-purple-400 to-purple-500 text-white rounded-2xl p-6">
                    <div class="flex items-center justify-between">
                        <div>
                            <p class="text-purple-100 text-sm">‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î</p>
                            <p class="text-3xl font-bold" id="totalMenuItems">0</p>
                        </div>
                        <div class="text-4xl opacity-80">üçΩÔ∏è</div>
                    </div>
                </div>
            </div>

            <!-- Tabs -->
            <div class="bg-white rounded-2xl shadow-lg mb-6">
                <div class="flex flex-wrap border-b">
                    <button id="ordersTab" class="tab-button active flex-1 md:flex-none px-8 py-4 font-semibold bg-blue-50 text-blue-600 border-b-2 border-blue-600">
                        üìã ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå (<span id="orderCount">0</span>)
                    </button>
                    <button id="menuTab" class="tab-button flex-1 md:flex-none px-8 py-4 font-semibold text-gray-600 hover:bg-gray-50">
                        üçΩÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π
                    </button>
                    <button id="settingsTab" class="tab-button flex-1 md:flex-none px-8 py-4 font-semibold text-gray-600 hover:bg-gray-50">
                        ‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô
                    </button>
                </div>
            </div>

            <!-- Orders Tab -->
            <div id="ordersContent" class="tab-content">
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">üìã ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</h2>
                    
                    <div id="ordersList" class="space-y-4">
                        <!-- ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                    </div>
                    
                    <div id="noOrders" class="text-center py-12">
                        <div class="text-6xl mb-4">üìã</div>
                        <p class="text-gray-500 text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p>
                        <p class="text-gray-400 text-sm mt-2">‡∏£‡∏≠‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£...</p>
                    </div>
                </div>
            </div>

            <!-- Menu Tab -->
            <div id="menuContent" class="tab-content hidden">
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <div class="flex justify-between items-center mb-6">
                        <h2 class="text-2xl font-bold text-gray-800">üçΩÔ∏è ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡πÄ‡∏°‡∏ô‡∏π</h2>
                        <button onclick="openAddMenuModal()" class="bg-green-500 text-white px-6 py-3 rounded-lg hover:bg-green-600 transition-colors font-semibold">
                            ‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà
                        </button>
                    </div>
                    
                    <div id="ownerMenuList" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                        <!-- ‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                    </div>
                    
                    <div id="noMenuOwner" class="text-center py-12">
                        <div class="text-6xl mb-4">üçΩÔ∏è</div>
                        <p class="text-gray-500 text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏°‡∏ô‡∏π</p>
                        <p class="text-gray-400 text-sm mt-2">‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏£‡∏Å‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                    </div>
                </div>
            </div>

            <!-- Settings Tab -->
            <div id="settingsContent" class="tab-content hidden">
                <div class="bg-white rounded-2xl shadow-lg p-6">
                    <h2 class="text-2xl font-bold text-gray-800 mb-6">‚öôÔ∏è ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤‡∏£‡πâ‡∏≤‡∏ô</h2>
                    
                    <div class="max-w-md">
                        <div class="mb-6">
                            <label class="block text-gray-700 font-semibold mb-2">‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô</label>
                            <input type="text" id="restaurantNameInput" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none" placeholder="‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô">
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-gray-700 font-semibold mb-2">üí≥ QR Code ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</label>
                            <input type="file" id="paymentQRCode" accept="image/*" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none mb-3">
                            <div id="paymentQRPreview" class="hidden">
                                <img id="paymentQRImage" class="max-w-xs rounded-lg shadow-lg mb-2">
                                <button onclick="removePaymentQR()" class="text-red-500 hover:text-red-700 text-sm">üóëÔ∏è ‡∏•‡∏ö QR Code</button>
                            </div>
                            <p class="text-gray-500 text-sm">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</p>
                        </div>

                        <div class="mb-6">
                            <label class="block text-gray-700 font-semibold mb-2">üè¶ ‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£</label>
                            <input type="text" id="bankAccountNumber" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none mb-2" placeholder="‡πÄ‡∏ä‡πà‡∏ô 123-4-56789-0">
                            <input type="text" id="bankName" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none mb-2" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£ ‡πÄ‡∏ä‡πà‡∏ô ‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£‡∏Å‡∏™‡∏¥‡∏Å‡∏£‡πÑ‡∏ó‡∏¢">
                            <input type="text" id="accountHolderName" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none" placeholder="‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ">
                            <p class="text-gray-500 text-sm mt-2">‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</p>
                        </div>
                        
                        <div class="mb-6">
                            <label class="block text-gray-700 font-semibold mb-2">üéØ QR Code ‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°</label>
                            <input type="file" id="loyaltyQRCode" accept="image/*" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none mb-3">
                            <div id="qrCodePreview" class="hidden">
                                <img id="qrCodeImage" class="max-w-xs rounded-lg shadow-lg mb-2">
                                <button onclick="removeLoyaltyQR()" class="text-red-500 hover:text-red-700 text-sm">üóëÔ∏è ‡∏•‡∏ö QR Code</button>
                            </div>
                            <p class="text-gray-500 text-sm">‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î QR Code ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°</p>
                        </div>
                        
                        <button onclick="updateRestaurantSettings()" class="bg-blue-500 text-white px-6 py-3 rounded-xl hover:bg-blue-600 transition-colors font-semibold">
                            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Checkout Modal -->
    <div id="checkoutModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-800">üõí ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h2>
                    <button onclick="closeCheckout()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>
            </div>
            
            <div class="p-6">
                <!-- Order Summary -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-4">üìã ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
                    <div id="checkoutItems" class="space-y-2 mb-4">
                        <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                    </div>
                    <div class="border-t pt-4">
                        <div class="flex justify-between text-xl font-bold text-green-600">
                            <span>‡∏£‡∏ß‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î:</span>
                            <span id="checkoutTotal">0 ‡∏ø</span>
                        </div>
                    </div>
                </div>

                <!-- Customer Info -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-4">üë§ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                        <input type="text" id="customerName" placeholder="‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•" class="p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none" required>
                        <input type="tel" id="customerPhone" placeholder="‡πÄ‡∏ö‡∏≠‡∏£‡πå‡πÇ‡∏ó‡∏£‡∏®‡∏±‡∏û‡∏ó‡πå" class="p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none" required>
                    </div>
                    <textarea id="customerAddress" placeholder="‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏™‡πà‡∏á" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none mt-4" rows="3" required></textarea>
                </div>

                <!-- Payment Method -->
                <div class="mb-6">
                    <h3 class="text-lg font-semibold mb-4">üí≥ ‡∏ß‡∏¥‡∏ò‡∏µ‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
                    <div class="space-y-3">
                        <label class="flex items-center space-x-3 p-3 border-2 border-gray-200 rounded-xl hover:border-blue-400 cursor-pointer">
                            <input type="radio" name="paymentMethod" value="cash" class="text-blue-600">
                            <span class="text-2xl">üíµ</span>
                            <span>‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á</span>
                        </label>
                        <label class="flex items-center space-x-3 p-3 border-2 border-gray-200 rounded-xl hover:border-blue-400 cursor-pointer">
                            <input type="radio" name="paymentMethod" value="transfer" class="text-blue-600">
                            <span class="text-2xl">üì±</span>
                            <span>‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô/‡∏™‡πÅ‡∏Å‡∏ô QR</span>
                        </label>
                    </div>
                </div>

                <!-- Payment Options -->
                <div id="paymentOptionsSection" class="hidden mb-6">
                    <h3 class="text-lg font-semibold mb-4">üí≥ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ß‡∏¥‡∏ò‡∏µ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
                        <button type="button" onclick="showQRPayment()" class="p-4 border-2 border-gray-200 rounded-xl hover:border-blue-400 transition-colors text-center">
                            <div class="text-3xl mb-2">üì±</div>
                            <div class="font-semibold">‡∏™‡πÅ‡∏Å‡∏ô QR Code</div>
                            <div class="text-sm text-gray-600">‡∏ä‡∏≥‡∏£‡∏∞‡∏ú‡πà‡∏≤‡∏ô Mobile Banking</div>
                        </button>
                        <button type="button" onclick="showBankTransfer()" class="p-4 border-2 border-gray-200 rounded-xl hover:border-blue-400 transition-colors text-center">
                            <div class="text-3xl mb-2">üè¶</div>
                            <div class="font-semibold">‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</div>
                            <div class="text-sm text-gray-600">‡πÇ‡∏≠‡∏ô‡∏ú‡πà‡∏≤‡∏ô‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div>
                        </button>
                    </div>
                </div>

                <!-- QR Payment Section -->
                <div id="qrPaymentSection" class="hidden mb-6">
                    <div class="bg-blue-50 rounded-xl p-6 text-center">
                        <h3 class="text-lg font-semibold mb-4">üì± ‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</h3>
                        <div id="paymentQRDisplay" class="mb-4">
                            <div class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ QR Code ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>
                        </div>
                        <div class="text-2xl font-bold text-green-600 mb-2" id="qrPaymentAmount">0 ‡∏ø</div>
                        <p class="text-gray-600 text-sm mb-4">‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡∏î‡πâ‡∏ß‡∏¢‡πÅ‡∏≠‡∏õ Mobile Banking ‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                        <button type="button" onclick="hideQRPayment()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                            ‚Üê ‡∏Å‡∏•‡∏±‡∏ö
                        </button>
                    </div>
                </div>

                <!-- Bank Transfer Section -->
                <div id="bankTransferSection" class="hidden mb-6">
                    <div class="bg-green-50 rounded-xl p-6">
                        <h3 class="text-lg font-semibold mb-4">üè¶ ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</h3>
                        <div id="bankAccountInfo" class="space-y-2 mb-4">
                            <div class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div>
                        </div>
                        <div class="text-2xl font-bold text-green-600 mb-4" id="transferAmount">0 ‡∏ø</div>
                        <button type="button" onclick="hideBankTransfer()" class="bg-gray-500 text-white px-4 py-2 rounded-lg hover:bg-gray-600 transition-colors">
                            ‚Üê ‡∏Å‡∏•‡∏±‡∏ö
                        </button>
                    </div>
                </div>

                <!-- Payment Slip Upload -->
                <div id="paymentSlipSection" class="hidden mb-6">
                    <h3 class="text-lg font-semibold mb-4">üìÑ ‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô</h3>
                    <input type="file" id="paymentSlip" accept="image/*" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none">
                    <div id="slipPreview" class="mt-4 hidden">
                        <img id="slipImage" class="max-w-xs rounded-lg shadow-lg">
                    </div>
                </div>

                <!-- Submit Button -->
                <button onclick="submitOrder()" class="w-full bg-green-500 text-white py-4 rounded-xl hover:bg-green-600 transition-colors font-semibold text-lg">
                    ‚úÖ ‡∏¢‡∏∑‡∏ô‡∏¢‡∏±‡∏ô‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
                </button>
            </div>
        </div>
    </div>

    <!-- Menu Modal -->
    <div id="menuModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-md w-full">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-xl font-bold text-gray-800" id="menuModalTitle">‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà</h2>
                    <button onclick="closeMenuModal()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>
            </div>
            
            <div class="p-6">
                <form id="menuForm" class="space-y-4">
                    <input type="hidden" id="editMenuId">
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π</label>
                        <input type="text" id="menuName" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none" placeholder="‡πÄ‡∏ä‡πà‡∏ô ‡∏ú‡∏±‡∏î‡πÑ‡∏ó‡∏¢" required>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">‡∏Ñ‡∏≥‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢</label>
                        <textarea id="menuDescription" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none" rows="3" placeholder="‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≤‡∏´‡∏≤‡∏£"></textarea>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">‡∏£‡∏≤‡∏Ñ‡∏≤ (‡∏ö‡∏≤‡∏ó)</label>
                        <input type="number" id="menuPrice" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none" placeholder="0" min="0" required>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡∏≠‡∏≤‡∏´‡∏≤‡∏£</label>
                        <input type="file" id="menuImage" accept="image/*" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none">
                        <div id="imagePreview" class="mt-4 hidden">
                            <img id="previewImg" class="image-preview">
                        </div>
                    </div>
                    
                    <div class="flex space-x-3 pt-4">
                        <button type="button" onclick="saveMenu()" class="flex-1 bg-green-500 text-white py-3 rounded-xl hover:bg-green-600 transition-colors font-semibold">
                            üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å
                        </button>
                        <button type="button" onclick="closeMenuModal()" class="flex-1 bg-gray-500 text-white py-3 rounded-xl hover:bg-gray-600 transition-colors font-semibold">
                            ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Order Status Modal -->
    <div id="orderStatusModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-lg w-full bounce-in">
            <div class="p-6 text-center">
                <div class="text-6xl mb-4">üéâ</div>
                <h2 class="text-2xl font-bold text-green-600 mb-2">‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à!</h2>
                <p class="text-gray-600 mb-4">‡∏´‡∏°‡∏≤‡∏¢‡πÄ‡∏•‡∏Ç‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</p>
                <div class="text-3xl font-bold text-blue-600 mb-6" id="orderNumber">#12345</div>
                
                <div class="bg-gray-50 rounded-xl p-4 mb-6">
                    <div class="flex items-center justify-center space-x-2 mb-2">
                        <div id="statusIcon" class="text-2xl">‚è≥</div>
                        <span id="statusText" class="font-semibold">‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£</span>
                    </div>
                    <div class="text-sm text-gray-600" id="statusDescription">‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì</div>
                </div>

                <!-- Receipt Section with QR Code -->
                <div class="receipt-section">
                    <h3 class="text-lg font-bold mb-3">üßæ ‡πÉ‡∏ö‡πÄ‡∏™‡∏£‡πá‡∏à‡∏£‡∏±‡∏ö‡πÄ‡∏á‡∏¥‡∏ô</h3>
                    <div class="text-left space-y-2 text-sm">
                        <div class="flex justify-between">
                            <span>‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå:</span>
                            <span id="receiptOrderNumber">#12345</span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà:</span>
                            <span id="receiptDate"></span>
                        </div>
                        <div class="flex justify-between">
                            <span>‡∏¢‡∏≠‡∏î‡∏£‡∏ß‡∏°:</span>
                            <span id="receiptTotal">0 ‡∏ø</span>
                        </div>
                    </div>
                    
                    <!-- QR Code for Loyalty Points -->
                    <div id="loyaltyQRSection" class="qr-code-section hidden">
                        <h4 class="text-purple-600 font-bold mb-2">üéØ ‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h4>
                        <img id="loyaltyQRDisplay" class="mx-auto max-w-32 rounded-lg shadow-md">
                        <p class="text-gray-600 text-xs mt-2">‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°</p>
                    </div>
                </div>
                
                <div class="space-y-3 mt-6">
                    <button onclick="closeOrderStatus()" class="w-full bg-blue-500 text-white py-3 rounded-xl hover:bg-blue-600 transition-colors font-semibold">
                        ‚úÖ ‡∏ï‡∏Å‡∏•‡∏á
                    </button>
                    <button onclick="showOrderDetails()" class="w-full bg-gray-500 text-white py-3 rounded-xl hover:bg-gray-600 transition-colors font-semibold">
                        üìã ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- My Orders Modal -->
    <div id="myOrdersModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold text-gray-800">üìã ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏â‡∏±‡∏ô</h2>
                    <button onclick="closeMyOrders()" class="text-gray-500 hover:text-gray-700 text-2xl">&times;</button>
                </div>
            </div>
            
            <div class="p-6">
                <div id="myOrdersList" class="space-y-4">
                    <!-- ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                </div>
                
                <div id="noMyOrders" class="text-center py-12">
                    <div class="text-6xl mb-4">üìã</div>
                    <p class="text-gray-500 text-lg">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå</p>
                    <p class="text-gray-400 text-sm mt-2">‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏±‡∏ô‡πÄ‡∏ñ‡∏≠‡∏∞!</p>
                </div>
            </div>
        </div>
    </div>

    <!-- Recipe Guide Modal -->
    <div id="recipeGuideModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b bg-gradient-to-r from-purple-500 to-pink-500 text-white rounded-t-2xl">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">üìã ‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠‡∏ó‡∏≥‡∏≠‡∏≤‡∏´‡∏≤‡∏£</h2>
                    <button onclick="closeRecipeGuide()" class="text-white hover:text-gray-200 text-2xl">&times;</button>
                </div>
            </div>
            
            <div class="p-6">
                <div class="mb-6">
                    <label class="block text-gray-700 font-semibold mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏î‡∏π‡∏Ñ‡∏π‡πà‡∏°‡∏∑‡∏≠</label>
                    <select id="recipeSelect" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-purple-400 focus:outline-none" onchange="showRecipeDetails()">
                        <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π --</option>
                    </select>
                </div>
                
                <div id="recipeDetails" class="hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Recipe Info -->
                        <div class="bg-gradient-to-br from-blue-50 to-purple-50 rounded-xl p-6">
                            <h3 class="text-xl font-bold mb-4 text-purple-700">üìù ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏ô‡∏π</h3>
                            <div id="recipeInfo" class="space-y-3">
                                <!-- ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏ô‡∏π‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                            </div>
                        </div>
                        
                        <!-- Ingredients -->
                        <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-xl p-6">
                            <h3 class="text-xl font-bold mb-4 text-green-700">üõí ‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°</h3>
                            <div id="ingredientsList" class="space-y-2">
                                <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                            </div>
                        </div>
                    </div>
                    
                    <!-- Cooking Steps -->
                    <div class="mt-6 bg-gradient-to-br from-orange-50 to-red-50 rounded-xl p-6">
                        <h3 class="text-xl font-bold mb-4 text-orange-700">üë®‚Äçüç≥ ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥</h3>
                        <div id="cookingSteps" class="space-y-4">
                            <!-- ‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                        </div>
                    </div>
                    
                    <!-- Tips -->
                    <div class="mt-6 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-6">
                        <h3 class="text-xl font-bold mb-4 text-yellow-700">üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö</h3>
                        <div id="cookingTips" class="space-y-2">
                            <!-- ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Portion Calculator Modal -->
    <div id="portionCalculatorModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b bg-gradient-to-r from-green-500 to-blue-500 text-white rounded-t-2xl">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">üßÆ ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡∏™‡πà‡∏ß‡∏ô‡∏ú‡∏™‡∏°</h2>
                    <button onclick="closePortionCalculator()" class="text-white hover:text-gray-200 text-2xl">&times;</button>
                </div>
            </div>
            
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-2 gap-6 mb-6">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π</label>
                        <select id="portionMenuSelect" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none" onchange="updatePortionCalculation()">
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π --</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ñ‡∏ô‡∏ó‡∏µ‡πà‡∏à‡∏∞‡∏ó‡∏≤‡∏ô</label>
                        <input type="number" id="peopleCount" min="1" max="100" value="4" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-blue-400 focus:outline-none" onchange="updatePortionCalculation()">
                    </div>
                </div>
                
                <div id="portionResults" class="hidden">
                    <div class="bg-gradient-to-br from-blue-50 to-green-50 rounded-xl p-6 mb-6">
                        <h3 class="text-xl font-bold mb-4 text-blue-700">üìä ‡∏ú‡∏•‡∏Å‡∏≤‡∏£‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì</h3>
                        <div id="portionSummary" class="grid grid-cols-1 md:grid-cols-3 gap-4 mb-4">
                            <!-- ‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                        </div>
                    </div>
                    
                    <div class="bg-gradient-to-br from-green-50 to-yellow-50 rounded-xl p-6">
                        <h3 class="text-xl font-bold mb-4 text-green-700">üõí ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
                        <div id="shoppingList" class="space-y-2">
                            <!-- ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                        </div>
                        
                        <button onclick="addCalculatedToCart()" class="mt-4 w-full bg-green-500 text-white py-3 rounded-xl hover:bg-green-600 transition-colors font-semibold">
                            üõí ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Party Planner Modal -->
    <div id="partyPlannerModal" class="hidden fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4">
        <div class="bg-white rounded-2xl max-w-4xl w-full max-h-[90vh] overflow-y-auto">
            <div class="p-6 border-b bg-gradient-to-r from-pink-500 to-purple-500 text-white rounded-t-2xl">
                <div class="flex justify-between items-center">
                    <h2 class="text-2xl font-bold">üéâ ‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ</h2>
                    <button onclick="closePartyPlanner()" class="text-white hover:text-gray-200 text-2xl">&times;</button>
                </div>
            </div>
            
            <div class="p-6">
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-6">
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô</label>
                        <select id="partyType" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-pink-400 focus:outline-none" onchange="updatePartyPlan()">
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô --</option>
                            <option value="birthday">üéÇ ‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î</option>
                            <option value="wedding">üíí ‡∏á‡∏≤‡∏ô‡πÅ‡∏ï‡πà‡∏á‡∏á‡∏≤‡∏ô</option>
                            <option value="office">üè¢ ‡∏á‡∏≤‡∏ô‡∏≠‡∏≠‡∏ü‡∏ü‡∏¥‡∏®</option>
                            <option value="family">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ‡∏á‡∏≤‡∏ô‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏£‡∏±‡∏ß</option>
                            <option value="friends">üë• ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏ù‡∏π‡∏á</option>
                        </select>
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Ç‡∏Å</label>
                        <input type="number" id="guestCount" min="5" max="500" value="20" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-pink-400 focus:outline-none" onchange="updatePartyPlan()">
                    </div>
                    
                    <div>
                        <label class="block text-gray-700 font-semibold mb-2">‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì (‡∏ö‡∏≤‡∏ó)</label>
                        <select id="budget" class="w-full p-3 border-2 border-gray-200 rounded-xl focus:border-pink-400 focus:outline-none" onchange="updatePartyPlan()">
                            <option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì --</option>
                            <option value="low">üí∞ ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î (100-200/‡∏Ñ‡∏ô)</option>
                            <option value="medium">üíé ‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á (200-400/‡∏Ñ‡∏ô)</option>
                            <option value="high">üëë ‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤ (400+ ‡∏ö‡∏≤‡∏ó/‡∏Ñ‡∏ô)</option>
                        </select>
                    </div>
                </div>
                
                <div id="partyPlanResults" class="hidden">
                    <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                        <!-- Recommended Menu -->
                        <div class="bg-gradient-to-br from-pink-50 to-purple-50 rounded-xl p-6">
                            <h3 class="text-xl font-bold mb-4 text-pink-700">üçΩÔ∏è ‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥</h3>
                            <div id="recommendedMenu" class="space-y-3">
                                <!-- ‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                            </div>
                        </div>
                        
                        <!-- Shopping Summary -->
                        <div class="bg-gradient-to-br from-green-50 to-blue-50 rounded-xl p-6">
                            <h3 class="text-xl font-bold mb-4 text-green-700">üìã ‡∏™‡∏£‡∏∏‡∏õ‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠</h3>
                            <div id="partySummary" class="space-y-3">
                                <!-- ‡∏™‡∏£‡∏∏‡∏õ‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                            </div>
                            
                            <button onclick="addPartyMenuToCart()" class="mt-4 w-full bg-pink-500 text-white py-3 rounded-xl hover:bg-pink-600 transition-colors font-semibold">
                                üéâ ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ‡πÉ‡∏ô‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤
                            </button>
                        </div>
                    </div>
                    
                    <!-- Party Tips -->
                    <div class="mt-6 bg-gradient-to-br from-yellow-50 to-orange-50 rounded-xl p-6">
                        <h3 class="text-xl font-bold mb-4 text-yellow-700">üí° ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏à‡∏±‡∏î‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ</h3>
                        <div id="partyTips" class="grid grid-cols-1 md:grid-cols-2 gap-4">
                            <!-- ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏à‡∏∞‡πÅ‡∏™‡∏î‡∏á‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà -->
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Notification Toast -->
    <div id="notification" class="fixed top-4 right-4 z-60 hidden">
        <div class="bg-white border-l-4 border-blue-500 rounded-lg shadow-lg p-4 max-w-sm notification-toast">
            <div class="flex items-center">
                <div class="text-2xl mr-3" id="notificationIcon">üîî</div>
                <div>
                    <div class="font-semibold text-gray-800" id="notificationTitle">‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
                    <div class="text-gray-600 text-sm" id="notificationMessage">‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏£‡∏∞‡∏ö‡∏ö
        let systemData = {
            restaurant: {
                name: '‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏û‡∏£‡∏µ‡πÄ‡∏°‡∏µ‡πà‡∏¢‡∏°',
                loyaltyQRCode: null,
                paymentQRCode: null,
                bankAccountNumber: '',
                bankName: '',
                accountHolderName: ''
            },
            menu: [],
            orders: [],
            currentUser: null,
            currentOrderId: null,
            menuQuantities: {}, // ‡πÄ‡∏Å‡πá‡∏ö‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏Ç‡∏≠‡∏á‡πÅ‡∏ï‡πà‡∏•‡∏∞‡πÄ‡∏°‡∏ô‡∏π
            stats: {
                todaySales: 0,
                todayOrders: 0
            }
        };

        // ‡πÇ‡∏´‡∏•‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏à‡∏≤‡∏Å localStorage
        function loadData() {
            const saved = localStorage.getItem('foodOrderSystem');
            if (saved) {
                try {
                    const data = JSON.parse(saved);
                    // ‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÑ‡∏ß‡πâ‡πÅ‡∏ó‡∏ô‡∏Å‡∏≤‡∏£‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï
                    systemData = { ...systemData, ...data };
                } catch (e) {
                    console.log('Error loading data:', e);
                }
            }
            
            // ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô (‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏•‡∏¢)
            if (!saved && systemData.menu.length === 0) {
                systemData.menu = [
                    {
                        id: '1',
                        name: '‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏ô‡πâ‡∏≥‡πÉ‡∏™',
                        description: '‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏ô‡πâ‡∏≥‡πÉ‡∏™‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡πâ‡∏ô‡πÅ‡∏•‡∏∞‡∏ú‡∏±‡∏Å ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 2-3 ‡∏Ñ‡∏ô',
                        price: 120,
                        image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRkY4QzAwIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9ImNlbnRyYWwiPvCfjbI8L3RleHQ+Cjwvc3ZnPgo8L3N2Zz4K',
                        createdAt: new Date().toISOString(),
                        servingSize: 3,
                        cookingTime: 15,
                        difficulty: '‡∏á‡πà‡∏≤‡∏¢',
                        ingredients: [
                            { name: '‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏∏‡∏Å‡∏µ‡πâ', amount: '200', unit: '‡∏Å‡∏£‡∏±‡∏°' },
                            { name: '‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö', amount: '150', unit: '‡∏Å‡∏£‡∏±‡∏°' },
                            { name: '‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏Ç‡∏≤‡∏ß', amount: '100', unit: '‡∏Å‡∏£‡∏±‡∏°' },
                            { name: '‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ', amount: '2', unit: '‡∏ä‡∏¥‡πâ‡∏ô' },
                            { name: '‡πÑ‡∏Ç‡πà', amount: '2', unit: '‡∏ü‡∏≠‡∏á' },
                            { name: '‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡∏™‡∏∏‡∏Å‡∏µ‡πâ', amount: '500', unit: '‡∏°‡∏•.' }
                        ],
                        steps: [
                            '‡∏ï‡πâ‡∏°‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏´‡∏°‡πâ‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏î‡∏∑‡∏≠‡∏î',
                            '‡πÉ‡∏™‡πà‡∏ô‡πâ‡∏≥‡∏ã‡∏∏‡∏õ‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡∏•‡∏á‡πÑ‡∏õ',
                            '‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö‡πÅ‡∏•‡∏∞‡πÄ‡∏ï‡πâ‡∏≤‡∏´‡∏π‡πâ',
                            '‡πÉ‡∏™‡πà‡πÄ‡∏™‡πâ‡∏ô‡∏™‡∏∏‡∏Å‡∏µ‡πâ‡πÅ‡∏•‡∏∞‡∏ú‡∏±‡∏Å‡∏Å‡∏≤‡∏î‡∏Ç‡∏≤‡∏ß',
                            '‡∏ï‡∏≠‡∏Å‡πÑ‡∏Ç‡πà‡πÉ‡∏™‡πà‡∏•‡∏á‡πÑ‡∏õ',
                            '‡∏ï‡πâ‡∏°‡∏≠‡∏µ‡∏Å 3-5 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü'
                        ],
                        tips: [
                            '‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ï‡πâ‡∏°‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏ú‡∏±‡∏Å‡∏¢‡∏±‡∏á‡∏Å‡∏£‡∏≠‡∏ö',
                            '‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏ú‡∏±‡∏Å‡∏≠‡∏∑‡πà‡∏ô‡πÜ ‡∏ï‡∏≤‡∏°‡∏ä‡∏≠‡∏ö',
                            '‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ô‡πâ‡∏≥‡∏à‡∏¥‡πâ‡∏°‡∏™‡∏∏‡∏Å‡∏µ‡πâ'
                        ]
                    },
                    {
                        id: '2',
                        name: '‡∏•‡∏≤‡∏ö‡∏´‡∏°‡∏π‡∏™‡∏î',
                        description: '‡∏•‡∏≤‡∏ö‡∏´‡∏°‡∏π‡∏£‡∏™‡πÄ‡∏î‡πá‡∏î ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ú‡∏±‡∏Å‡∏™‡∏î ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 4-5 ‡∏Ñ‡∏ô',
                        price: 85,
                        image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjNEVBRjUwIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9ImNlbnRyYWwiPvCfpZc8L3RleHQ+Cjwvc3ZnPgo8L3N2Zz4K',
                        createdAt: new Date().toISOString(),
                        servingSize: 4,
                        cookingTime: 10,
                        difficulty: '‡∏á‡πà‡∏≤‡∏¢',
                        ingredients: [
                            { name: '‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö‡∏™‡∏î', amount: '300', unit: '‡∏Å‡∏£‡∏±‡∏°' },
                            { name: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏Ñ‡∏±‡πà‡∏ß', amount: '2', unit: '‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞' },
                            { name: '‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤', amount: '2', unit: '‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞' },
                            { name: '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', amount: '3', unit: '‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞' },
                            { name: '‡∏û‡∏£‡∏¥‡∏Å‡∏õ‡πà‡∏ô', amount: '1', unit: '‡∏ä‡πâ‡∏≠‡∏ô‡∏ä‡∏≤' },
                            { name: '‡∏ú‡∏±‡∏Å‡∏ä‡∏µ', amount: '1', unit: '‡∏ï‡πâ‡∏ô' },
                            { name: '‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°', amount: '2', unit: '‡∏ï‡πâ‡∏ô' }
                        ],
                        steps: [
                            '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°',
                            '‡∏ú‡∏±‡∏î‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö‡πÉ‡∏ô‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡∏à‡∏ô‡∏™‡∏∏‡∏Å',
                            '‡∏õ‡∏¥‡∏î‡πÑ‡∏ü ‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≤‡∏ß‡∏Ñ‡∏±‡πà‡∏ß',
                            '‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤ ‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß ‡∏û‡∏£‡∏¥‡∏Å‡∏õ‡πà‡∏ô',
                            '‡πÇ‡∏£‡∏¢‡∏ú‡∏±‡∏Å‡∏ä‡∏µ ‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°',
                            '‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏ú‡∏±‡∏Å‡∏™‡∏î'
                        ],
                        tips: [
                            '‡πÉ‡∏ä‡πâ‡∏´‡∏°‡∏π‡∏™‡∏±‡∏ö‡∏™‡∏î‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏î‡∏µ‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î',
                            '‡∏ä‡∏¥‡∏°‡∏£‡∏™‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏£‡∏∑‡πâ‡∏≠‡∏¢ ‡πÄ‡∏Ñ‡πá‡∏° ‡πÄ‡∏ú‡πá‡∏î',
                            '‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏Ç‡∏ì‡∏∞‡∏£‡πâ‡∏≠‡∏ô'
                        ]
                    },
                    {
                        id: '3',
                        name: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏õ‡∏π‡∏™‡∏î',
                        description: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏ú‡∏±‡∏î‡∏õ‡∏π‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡πÅ‡∏ô‡πà‡∏ô ‡∏´‡∏≠‡∏°‡∏´‡∏ß‡∏≤‡∏ô ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 2 ‡∏Ñ‡∏ô',
                        price: 150,
                        image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRkZENzAwIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9ImNlbnRyYWwiPvCfpKA8L3RleHQ+Cjwvc3ZnPgo8L3N2Zz4K',
                        createdAt: new Date().toISOString(),
                        servingSize: 2,
                        cookingTime: 12,
                        difficulty: '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
                        ingredients: [
                            { name: '‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏ß‡∏¢', amount: '2', unit: '‡∏à‡∏≤‡∏ô' },
                            { name: '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏õ‡∏π‡∏™‡∏î', amount: '150', unit: '‡∏Å‡∏£‡∏±‡∏°' },
                            { name: '‡πÑ‡∏Ç‡πà', amount: '2', unit: '‡∏ü‡∏≠‡∏á' },
                            { name: '‡∏´‡∏≠‡∏°‡πÉ‡∏´‡∏ç‡πà', amount: '1/2', unit: '‡∏´‡∏±‡∏ß' },
                            { name: '‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô‡∏´‡∏≠‡∏¢', amount: '2', unit: '‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞' },
                            { name: '‡∏ã‡∏µ‡∏≠‡∏¥‡πä‡∏ß‡∏Ç‡∏≤‡∏ß', amount: '1', unit: '‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞' },
                            { name: '‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏°', amount: '2', unit: '‡∏ï‡πâ‡∏ô' }
                        ],
                        steps: [
                            '‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏õ‡∏π‡∏™‡∏î‡πÉ‡∏´‡πâ‡∏û‡∏£‡πâ‡∏≠‡∏°',
                            '‡∏ï‡∏±‡πâ‡∏á‡∏Å‡∏£‡∏∞‡∏ó‡∏∞‡πÉ‡∏™‡πà‡∏ô‡πâ‡∏≥‡∏°‡∏±‡∏ô',
                            '‡πÉ‡∏™‡πà‡πÑ‡∏Ç‡πà‡∏ï‡∏µ‡πÉ‡∏´‡πâ‡∏™‡∏∏‡∏Å',
                            '‡πÉ‡∏™‡πà‡∏´‡∏≠‡∏°‡πÉ‡∏´‡∏ç‡πà‡∏ú‡∏±‡∏î‡∏´‡∏≠‡∏°',
                            '‡πÉ‡∏™‡πà‡∏Ç‡πâ‡∏≤‡∏ß‡∏™‡∏ß‡∏¢‡∏ú‡∏±‡∏î‡πÉ‡∏´‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏±‡∏ô',
                            '‡πÉ‡∏™‡πà‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏õ‡∏π‡πÅ‡∏•‡∏∞‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™',
                            '‡πÇ‡∏£‡∏¢‡∏ï‡πâ‡∏ô‡∏´‡∏≠‡∏° ‡∏û‡∏£‡πâ‡∏≠‡∏°‡πÄ‡∏™‡∏¥‡∏£‡πå‡∏ü'
                        ],
                        tips: [
                            '‡πÉ‡∏ä‡πâ‡∏Ç‡πâ‡∏≤‡∏ß‡πÄ‡∏¢‡πá‡∏ô‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏î‡∏µ‡∏Å‡∏ß‡πà‡∏≤',
                            '‡πÑ‡∏ü‡πÅ‡∏£‡∏á‡∏ï‡∏•‡∏≠‡∏î‡∏Å‡∏≤‡∏£‡∏ú‡∏±‡∏î',
                            '‡πÄ‡∏ô‡∏∑‡πâ‡∏≠‡∏õ‡∏π‡πÑ‡∏°‡πà‡∏Ñ‡∏ß‡∏£‡∏ú‡∏±‡∏î‡∏ô‡∏≤‡∏ô‡πÄ‡∏Å‡∏¥‡∏ô‡πÑ‡∏õ'
                        ]
                    },
                    {
                        id: '4',
                        name: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î',
                        description: '‡∏ï‡πâ‡∏°‡∏¢‡∏≥‡∏Å‡∏∏‡πâ‡∏á‡∏£‡∏™‡∏à‡∏±‡∏î‡∏à‡πâ‡∏≤‡∏ô ‡πÄ‡∏õ‡∏£‡∏∑‡πâ‡∏≠‡∏¢ ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö 3-4 ‡∏Ñ‡∏ô',
                        price: 180,
                        image: 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRUY0NDQ0IiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjI0IiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9ImNlbnRyYWwiPvCfpJo8L3RleHQ+Cjwvc3ZnPgo8L3N2Zz4K',
                        createdAt: new Date().toISOString(),
                        servingSize: 4,
                        cookingTime: 20,
                        difficulty: '‡∏õ‡∏≤‡∏ô‡∏Å‡∏•‡∏≤‡∏á',
                        ingredients: [
                            { name: '‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î', amount: '300', unit: '‡∏Å‡∏£‡∏±‡∏°' },
                            { name: '‡πÄ‡∏´‡πá‡∏î‡∏ü‡∏≤‡∏á', amount: '100', unit: '‡∏Å‡∏£‡∏±‡∏°' },
                            { name: '‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®', amount: '2', unit: '‡∏•‡∏π‡∏Å' },
                            { name: '‡∏Ç‡πà‡∏≤', amount: '3', unit: '‡πÅ‡∏ß‡πà‡∏ô' },
                            { name: '‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ', amount: '2', unit: '‡∏ï‡πâ‡∏ô' },
                            { name: '‡πÉ‡∏ö‡∏°‡∏∞‡∏Å‡∏£‡∏π‡∏î', amount: '5', unit: '‡πÉ‡∏ö' },
                            { name: '‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤', amount: '3', unit: '‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞' },
                            { name: '‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß', amount: '4', unit: '‡∏ä‡πâ‡∏≠‡∏ô‡πÇ‡∏ï‡πä‡∏∞' },
                            { name: '‡∏û‡∏£‡∏¥‡∏Å‡∏Ç‡∏µ‡πâ‡∏´‡∏ô‡∏π', amount: '5', unit: '‡πÄ‡∏°‡πá‡∏î' }
                        ],
                        steps: [
                            '‡∏ï‡πâ‡∏°‡∏ô‡πâ‡∏≥‡πÉ‡∏ô‡∏´‡∏°‡πâ‡∏≠‡πÉ‡∏´‡πâ‡πÄ‡∏î‡∏∑‡∏≠‡∏î',
                            '‡πÉ‡∏™‡πà‡∏Ç‡πà‡∏≤ ‡∏ï‡∏∞‡πÑ‡∏Ñ‡∏£‡πâ ‡πÉ‡∏ö‡∏°‡∏∞‡∏Å‡∏£‡∏π‡∏î',
                            '‡πÉ‡∏™‡πà‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î‡∏ó‡∏µ‡πà‡∏•‡πâ‡∏≤‡∏á‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡πÅ‡∏•‡πâ‡∏ß',
                            '‡πÉ‡∏™‡πà‡πÄ‡∏´‡πá‡∏î‡∏ü‡∏≤‡∏á ‡∏°‡∏∞‡πÄ‡∏Ç‡∏∑‡∏≠‡πÄ‡∏ó‡∏®',
                            '‡∏õ‡∏£‡∏∏‡∏á‡∏£‡∏™‡∏î‡πâ‡∏ß‡∏¢‡∏ô‡πâ‡∏≥‡∏õ‡∏•‡∏≤',
                            '‡πÉ‡∏™‡πà‡∏û‡∏£‡∏¥‡∏Å‡∏Ç‡∏µ‡πâ‡∏´‡∏ô‡∏π',
                            '‡∏õ‡∏¥‡∏î‡πÑ‡∏ü ‡πÉ‡∏™‡πà‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß'
                        ],
                        tips: [
                            '‡πÉ‡∏ä‡πâ‡∏Å‡∏∏‡πâ‡∏á‡∏™‡∏î‡∏à‡∏∞‡πÑ‡∏î‡πâ‡∏£‡∏™‡∏ä‡∏≤‡∏ï‡∏¥‡∏´‡∏ß‡∏≤‡∏ô‡∏ò‡∏£‡∏£‡∏°‡∏ä‡∏≤‡∏ï‡∏¥',
                            '‡πÉ‡∏™‡πà‡∏ô‡πâ‡∏≥‡∏°‡∏∞‡∏ô‡∏≤‡∏ß‡∏ï‡∏≠‡∏ô‡∏õ‡∏¥‡∏î‡πÑ‡∏ü',
                            '‡∏ä‡∏¥‡∏°‡∏£‡∏™‡πÉ‡∏´‡πâ‡πÄ‡∏õ‡∏£‡∏∑‡πâ‡∏≠‡∏¢ ‡πÄ‡∏Ñ‡πá‡∏° ‡πÄ‡∏ú‡πá‡∏î'
                        ]
                    }
                ];
                saveData();
            }

            // ‡πÅ‡∏™‡∏î‡∏á QR Code ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
            updateQRCodePreview();
            updatePaymentQRPreview();
        }

        // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏•‡∏á localStorage
        function saveData() {
            try {
                localStorage.setItem('foodOrderSystem', JSON.stringify(systemData));
            } catch (e) {
                console.log('Error saving data:', e);
            }
        }

        // Login Functions
        function loginAsCustomer() {
            systemData.currentUser = 'customer';
            document.getElementById('loginModal').classList.add('hidden');
            document.getElementById('customerInterface').classList.remove('hidden');
            updateCustomerUI();
            showNotification('üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö!', '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
        }

        function loginAsOwner() {
            const password = document.getElementById('ownerPassword').value;
            if (password === '1234') {
                systemData.currentUser = 'owner';
                document.getElementById('loginModal').classList.add('hidden');
                document.getElementById('ownerInterface').classList.remove('hidden');
                updateOwnerUI();
                showNotification('üéâ ‡∏¢‡∏¥‡∏ô‡∏î‡∏µ‡∏ï‡πâ‡∏≠‡∏ô‡∏£‡∏±‡∏ö!', '‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏£‡πâ‡∏≤‡∏ô‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à');
            } else {
                showNotification('‚ùå ‡∏£‡∏´‡∏±‡∏™‡∏ú‡πà‡∏≤‡∏ô‡πÑ‡∏°‡πà‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏•‡∏≠‡∏á‡πÉ‡∏´‡∏°‡πà‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á');
            }
        }

        function logout() {
            systemData.currentUser = null;
            document.getElementById('ownerInterface').classList.add('hidden');
            document.getElementById('customerInterface').classList.add('hidden');
            document.getElementById('loginModal').classList.remove('hidden');
            document.getElementById('ownerPassword').value = '';
        }

        // Customer UI Functions
        function updateCustomerUI() {
            document.getElementById('customerRestaurantName').textContent = systemData.restaurant.name;
            updateCustomerMenu();
            updateMyOrdersBadge();
        }

        function updateCustomerMenu() {
            const menuList = document.getElementById('customerMenuList');
            const noMenu = document.getElementById('noMenuCustomer');
            
            if (systemData.menu.length === 0) {
                menuList.style.display = 'none';
                noMenu.style.display = 'block';
            } else {
                menuList.style.display = 'grid';
                noMenu.style.display = 'none';
                
                menuList.innerHTML = systemData.menu.map(item => `
                    <div class="menu-item bg-white rounded-xl shadow-lg overflow-hidden">
                        <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover">
                        <div class="p-6">
                            <h3 class="text-xl font-bold mb-2">${item.name}</h3>
                            <p class="text-gray-600 mb-3">${item.description}</p>
                            <div class="flex justify-between items-center mb-4">
                                <span class="text-2xl font-bold text-green-600">${item.price.toLocaleString()} ‡∏ø</span>
                            </div>
                            <div class="flex items-center justify-between">
                                <div class="flex items-center space-x-3">
                                    <button onclick="updateMenuQuantity('${item.id}', -1)" class="bg-gray-200 text-gray-700 w-10 h-10 rounded-full hover:bg-gray-300 font-bold">-</button>
                                    <span id="quantity-${item.id}" class="font-bold text-lg min-w-[2rem] text-center">${systemData.menuQuantities[item.id] || 1}</span>
                                    <button onclick="updateMenuQuantity('${item.id}', 1)" class="bg-gray-200 text-gray-700 w-10 h-10 rounded-full hover:bg-gray-300 font-bold">+</button>
                                </div>
                                <button onclick="orderDirectly('${item.id}')" class="bg-green-500 text-white px-6 py-2 rounded-lg hover:bg-green-600 transition-colors font-semibold">
                                    üõí ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏•‡∏¢
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏°‡∏ô‡∏π
        function updateMenuQuantity(menuId, change) {
            if (!systemData.menuQuantities[menuId]) {
                systemData.menuQuantities[menuId] = 1;
            }
            
            systemData.menuQuantities[menuId] += change;
            
            if (systemData.menuQuantities[menuId] < 1) {
                systemData.menuQuantities[menuId] = 1;
            }
            
            if (systemData.menuQuantities[menuId] > 99) {
                systemData.menuQuantities[menuId] = 99;
            }
            
            document.getElementById(`quantity-${menuId}`).textContent = systemData.menuQuantities[menuId];
            saveData();
        }

        // ‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡∏ô‡∏™‡∏±‡πà‡∏á‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ï‡∏£‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏°‡∏ô‡∏π
        function orderDirectly(menuId) {
            const menu = systemData.menu.find(m => m.id === menuId);
            if (!menu) return;
            
            const quantity = systemData.menuQuantities[menuId] || 1;
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
            const orderItems = [{
                id: menuId,
                name: menu.name,
                price: menu.price,
                image: menu.image,
                quantity: quantity
            }];
            
            // ‡πÄ‡∏õ‡∏¥‡∏î modal ‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
            openDirectOrderModal(orderItems);
        }

        function openDirectOrderModal(items) {
            // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÉ‡∏ô‡∏´‡∏ô‡πâ‡∏≤‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
            const checkoutItems = document.getElementById('checkoutItems');
            const checkoutTotal = document.getElementById('checkoutTotal');
            
            const totalPrice = items.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            checkoutItems.innerHTML = items.map(item => `
                <div class="flex justify-between items-center">
                    <span>${item.name} x${item.quantity}</span>
                    <span class="font-semibold">${(item.price * item.quantity).toLocaleString()} ‡∏ø</span>
                </div>
            `).join('');
            
            checkoutTotal.textContent = totalPrice.toLocaleString() + ' ‡∏ø';
            
            // ‡πÄ‡∏Å‡πá‡∏ö‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÑ‡∏ß‡πâ‡πÉ‡∏ô temporary
            systemData.tempOrderItems = items;
            
            document.getElementById('checkoutModal').classList.remove('hidden');
        }



        function closeCheckout() {
            document.getElementById('checkoutModal').classList.add('hidden');
        }

        // Payment method change handler
        document.addEventListener('change', function(e) {
            if (e.target.name === 'paymentMethod') {
                const optionsSection = document.getElementById('paymentOptionsSection');
                const slipSection = document.getElementById('paymentSlipSection');
                const qrSection = document.getElementById('qrPaymentSection');
                const bankSection = document.getElementById('bankTransferSection');
                
                if (e.target.value === 'transfer') {
                    optionsSection.classList.remove('hidden');
                    slipSection.classList.add('hidden');
                    qrSection.classList.add('hidden');
                    bankSection.classList.add('hidden');
                } else {
                    optionsSection.classList.add('hidden');
                    slipSection.classList.add('hidden');
                    qrSection.classList.add('hidden');
                    bankSection.classList.add('hidden');
                }
            }
        });

        // Payment option functions
        function showQRPayment() {
            document.getElementById('paymentOptionsSection').classList.add('hidden');
            document.getElementById('qrPaymentSection').classList.remove('hidden');
            document.getElementById('paymentSlipSection').classList.remove('hidden');
            
            const totalPrice = systemData.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('qrPaymentAmount').textContent = totalPrice.toLocaleString() + ' ‡∏ø';
            
            const qrDisplay = document.getElementById('paymentQRDisplay');
            if (systemData.restaurant.paymentQRCode) {
                qrDisplay.innerHTML = `<img src="${systemData.restaurant.paymentQRCode}" alt="Payment QR Code" class="mx-auto max-w-64 rounded-lg shadow-lg">`;
            } else {
                qrDisplay.innerHTML = '<div class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ QR Code ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô</div>';
            }
        }

        function showBankTransfer() {
            document.getElementById('paymentOptionsSection').classList.add('hidden');
            document.getElementById('bankTransferSection').classList.remove('hidden');
            document.getElementById('paymentSlipSection').classList.remove('hidden');
            
            const totalPrice = systemData.cart.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            document.getElementById('transferAmount').textContent = totalPrice.toLocaleString() + ' ‡∏ø';
            
            const bankInfo = document.getElementById('bankAccountInfo');
            if (systemData.restaurant.bankAccountNumber) {
                bankInfo.innerHTML = `
                    <div class="bg-white rounded-lg p-4 border">
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-gray-600">‡πÄ‡∏•‡∏Ç‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</span>
                            <span class="font-bold">${systemData.restaurant.bankAccountNumber}</span>
                        </div>
                        <div class="flex justify-between items-center mb-2">
                            <span class="text-gray-600">‡∏ò‡∏ô‡∏≤‡∏Ñ‡∏≤‡∏£:</span>
                            <span class="font-semibold">${systemData.restaurant.bankName}</span>
                        </div>
                        <div class="flex justify-between items-center">
                            <span class="text-gray-600">‡∏ä‡∏∑‡πà‡∏≠‡∏ö‡∏±‡∏ç‡∏ä‡∏µ:</span>
                            <span class="font-semibold">${systemData.restaurant.accountHolderName}</span>
                        </div>
                    </div>
                `;
            } else {
                bankInfo.innerHTML = '<div class="text-gray-500">‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ö‡∏±‡∏ç‡∏ä‡∏µ</div>';
            }
        }

        function hideQRPayment() {
            document.getElementById('qrPaymentSection').classList.add('hidden');
            document.getElementById('paymentOptionsSection').classList.remove('hidden');
            document.getElementById('paymentSlipSection').classList.add('hidden');
        }

        function hideBankTransfer() {
            document.getElementById('bankTransferSection').classList.add('hidden');
            document.getElementById('paymentOptionsSection').classList.remove('hidden');
            document.getElementById('paymentSlipSection').classList.add('hidden');
        }

        // Payment slip preview
        document.addEventListener('change', function(e) {
            if (e.target.id === 'paymentSlip') {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('slipImage').src = e.target.result;
                        document.getElementById('slipPreview').classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                }
            }
        });

        // QR Code upload handlers
        document.addEventListener('change', function(e) {
            if (e.target.id === 'loyaltyQRCode') {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        systemData.restaurant.loyaltyQRCode = e.target.result;
                        updateQRCodePreview();
                        saveData();
                    };
                    reader.readAsDataURL(file);
                }
            } else if (e.target.id === 'paymentQRCode') {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        systemData.restaurant.paymentQRCode = e.target.result;
                        updatePaymentQRPreview();
                        saveData();
                    };
                    reader.readAsDataURL(file);
                }
            }
        });

        function updateQRCodePreview() {
            const preview = document.getElementById('qrCodePreview');
            const image = document.getElementById('qrCodeImage');
            
            if (systemData.restaurant.loyaltyQRCode) {
                image.src = systemData.restaurant.loyaltyQRCode;
                preview.classList.remove('hidden');
            } else {
                preview.classList.add('hidden');
            }
        }

        function updatePaymentQRPreview() {
            const preview = document.getElementById('paymentQRPreview');
            const image = document.getElementById('paymentQRImage');
            
            if (systemData.restaurant.paymentQRCode) {
                image.src = systemData.restaurant.paymentQRCode;
                preview.classList.remove('hidden');
            } else {
                preview.classList.add('hidden');
            }
        }

        function removeLoyaltyQR() {
            systemData.restaurant.loyaltyQRCode = null;
            document.getElementById('loyaltyQRCode').value = '';
            updateQRCodePreview();
            saveData();
            showNotification('üóëÔ∏è ‡∏•‡∏ö QR Code', 'QR Code ‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß');
        }

        function removePaymentQR() {
            systemData.restaurant.paymentQRCode = null;
            document.getElementById('paymentQRCode').value = '';
            updatePaymentQRPreview();
            saveData();
            showNotification('üóëÔ∏è ‡∏•‡∏ö QR Code', 'QR Code ‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß');
        }

        function submitOrder() {
            const customerName = document.getElementById('customerName').value.trim();
            const customerPhone = document.getElementById('customerPhone').value.trim();
            const customerAddress = document.getElementById('customerAddress').value.trim();
            const paymentMethod = document.querySelector('input[name="paymentMethod"]:checked');
            
            if (!customerName || !customerPhone || !customerAddress || !paymentMethod) {
                showNotification('‚ö†Ô∏è ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÉ‡∏´‡πâ‡∏Ñ‡∏£‡∏ö‡∏ñ‡πâ‡∏ß‡∏ô');
                return;
            }
            
            if (paymentMethod.value === 'transfer' && !document.getElementById('paymentSlip').files[0]) {
                showNotification('‚ö†Ô∏è ‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÅ‡∏ô‡∏ö‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô');
                return;
            }
            
            // ‡πÉ‡∏ä‡πâ tempOrderItems ‡πÅ‡∏ó‡∏ô cart
            if (!systemData.tempOrderItems || systemData.tempOrderItems.length === 0) {
                showNotification('‚ö†Ô∏è ‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡πà‡∏≠‡∏ô');
                return;
            }
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÉ‡∏´‡∏°‡πà
            const orderId = Date.now().toString();
            const totalPrice = systemData.tempOrderItems.reduce((sum, item) => sum + (item.price * item.quantity), 0);
            
            let paymentSlipData = null;
            if (paymentMethod.value === 'transfer' && document.getElementById('paymentSlip').files[0]) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    paymentSlipData = e.target.result;
                    createOrder();
                };
                reader.readAsDataURL(document.getElementById('paymentSlip').files[0]);
            } else {
                createOrder();
            }
            
            function createOrder() {
                const newOrder = {
                    id: orderId,
                    customerName,
                    customerPhone,
                    customerAddress,
                    items: [...systemData.tempOrderItems],
                    total: totalPrice,
                    paymentMethod: paymentMethod.value,
                    paymentSlip: paymentSlipData,
                    status: 'pending',
                    timestamp: new Date().toISOString(),
                    customerId: 'customer_' + Date.now()
                };
                
                systemData.orders.push(newOrder);
                systemData.currentOrderId = orderId;
                
                // ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏™‡∏±‡πà‡∏á‡πÅ‡∏•‡πâ‡∏ß
                systemData.tempOrderItems.forEach(item => {
                    systemData.menuQuantities[item.id] = 1;
                });
                systemData.tempOrderItems = [];
                
                saveData();
                closeCheckout();
                showOrderStatus(newOrder);
                updateCustomerUI();
                
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Owner UI ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
                if (systemData.currentUser === 'owner') {
                    updateOwnerUI();
                }
            }
        }

        function showOrderStatus(order) {
            document.getElementById('orderNumber').textContent = '#' + order.id;
            document.getElementById('receiptOrderNumber').textContent = '#' + order.id;
            document.getElementById('receiptDate').textContent = new Date(order.timestamp).toLocaleString('th-TH');
            document.getElementById('receiptTotal').textContent = order.total.toLocaleString() + ' ‡∏ø';
            
            // ‡πÅ‡∏™‡∏î‡∏á QR Code ‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡∏ñ‡πâ‡∏≤‡∏°‡∏µ
            const loyaltySection = document.getElementById('loyaltyQRSection');
            const loyaltyDisplay = document.getElementById('loyaltyQRDisplay');
            
            if (systemData.restaurant.loyaltyQRCode) {
                loyaltyDisplay.src = systemData.restaurant.loyaltyQRCode;
                loyaltySection.classList.remove('hidden');
            } else {
                loyaltySection.classList.add('hidden');
            }
            
            updateOrderStatusDisplay(order.status);
            document.getElementById('orderStatusModal').classList.remove('hidden');
        }

        function updateOrderStatusDisplay(status) {
            const statusIcon = document.getElementById('statusIcon');
            const statusText = document.getElementById('statusText');
            const statusDescription = document.getElementById('statusDescription');
            
            switch (status) {
                case 'pending':
                    statusIcon.textContent = '‚è≥';
                    statusText.textContent = '‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£';
                    statusDescription.textContent = '‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì';
                    break;
                case 'preparing':
                    statusIcon.textContent = 'üë®‚Äçüç≥';
                    statusText.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥';
                    statusDescription.textContent = '‡∏£‡πâ‡∏≤‡∏ô‡∏Ñ‡πâ‡∏≤‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì';
                    break;
                case 'delivering':
                    statusIcon.textContent = 'üöö';
                    statusText.textContent = '‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á';
                    statusDescription.textContent = '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÄ‡∏î‡∏¥‡∏ô‡∏ó‡∏≤‡∏á‡πÑ‡∏õ‡∏´‡∏≤‡∏Ñ‡∏∏‡∏ì';
                    break;
                case 'completed':
                    statusIcon.textContent = '‚úÖ';
                    statusText.textContent = '‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß';
                    statusDescription.textContent = '‡∏≠‡∏≤‡∏´‡∏≤‡∏£‡∏ñ‡∏π‡∏Å‡∏™‡πà‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢‡πÅ‡∏•‡πâ‡∏ß';
                    break;
            }
        }

        function closeOrderStatus() {
            document.getElementById('orderStatusModal').classList.add('hidden');
        }

        function showOrderDetails() {
            closeOrderStatus();
            showMyOrders();
        }

        function showMyOrders() {
            const customerOrders = systemData.orders.filter(order => 
                order.customerId && order.customerId.startsWith('customer_')
            );
            
            const myOrdersList = document.getElementById('myOrdersList');
            const noMyOrders = document.getElementById('noMyOrders');
            
            if (customerOrders.length === 0) {
                myOrdersList.style.display = 'none';
                noMyOrders.style.display = 'block';
            } else {
                myOrdersList.style.display = 'block';
                noMyOrders.style.display = 'none';
                
                myOrdersList.innerHTML = customerOrders.map(order => `
                    <div class="order-card bg-white border-2 border-gray-200 rounded-xl p-6 ${order.status}">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-xl font-bold">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #${order.id}</h3>
                                <p class="text-gray-600">${new Date(order.timestamp).toLocaleString('th-TH')}</p>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-green-600">${order.total.toLocaleString()} ‡∏ø</div>
                                <div class="status-${order.status} text-white px-3 py-1 rounded-full text-sm font-semibold inline-block">
                                    ${getStatusText(order.status)}
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h4 class="font-semibold mb-2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</h4>
                            <div class="space-y-1">
                                ${order.items.map(item => `
                                    <div class="flex justify-between text-sm">
                                        <span>${item.name} x${item.quantity}</span>
                                        <span>${(item.price * item.quantity).toLocaleString()} ‡∏ø</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="text-sm text-gray-600 mb-4">
                            <p><strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</strong> ${order.customerAddress}</p>
                            <p><strong>‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</strong> ${order.paymentMethod === 'cash' ? '‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á' : '‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô'}</p>
                            ${order.paymentSlip ? `
                                <div class="mt-2">
                                    <strong>‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô:</strong>
                                    <div class="mt-1">
                                        <img src="${order.paymentSlip}" alt="Payment Slip" class="max-w-xs rounded-lg shadow-lg cursor-pointer hover:opacity-80 transition-opacity" onclick="viewPaymentSlip('${order.paymentSlip}')">
                                        <p class="text-xs text-blue-600 mt-1 cursor-pointer hover:underline" onclick="viewPaymentSlip('${order.paymentSlip}')">üîç ‡∏Ñ‡∏•‡∏¥‡∏Å‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡∏Ç‡∏ô‡∏≤‡∏î‡πÄ‡∏ï‡πá‡∏°</p>
                                    </div>
                                </div>
                            ` : ''}
                        </div>

                        <!-- QR Code ‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡πÉ‡∏ô‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå -->
                        ${systemData.restaurant.loyaltyQRCode ? `
                            <div class="qr-code-section mt-4">
                                <h4 class="text-purple-600 font-bold mb-2">üéØ ‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å</h4>
                                <img src="${systemData.restaurant.loyaltyQRCode}" alt="Loyalty QR Code" class="mx-auto max-w-32 rounded-lg shadow-md cursor-pointer" onclick="viewPaymentSlip('${systemData.restaurant.loyaltyQRCode}')">
                                <p class="text-gray-600 text-xs mt-2">‡∏™‡πÅ‡∏Å‡∏ô QR Code ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°</p>
                                ${order.status !== 'completed' ? '<p class="text-orange-500 text-xs mt-1">‚è≥ ‡∏£‡∏≠‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡πÄ‡∏™‡∏£‡πá‡∏à‡∏™‡∏¥‡πâ‡∏ô‡∏Å‡πà‡∏≠‡∏ô‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°</p>' : '<p class="text-green-500 text-xs mt-1">‚úÖ ‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏™‡∏∞‡∏™‡∏°‡πÅ‡∏ï‡πâ‡∏°‡πÅ‡∏•‡πâ‡∏ß!</p>'}
                            </div>
                        ` : ''}
                        
                        ${order.status !== 'completed' ? `
                            <button onclick="cancelOrder('${order.id}')" class="bg-red-500 text-white px-4 py-2 rounded-lg hover:bg-red-600 transition-colors">
                                ‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå
                            </button>
                        ` : ''}
                    </div>
                `).join('');
            }
            
            document.getElementById('myOrdersModal').classList.remove('hidden');
        }

        function getStatusText(status) {
            switch (status) {
                case 'pending': return '‚è≥ ‡∏£‡∏≠‡∏î‡∏≥‡πÄ‡∏ô‡∏¥‡∏ô‡∏Å‡∏≤‡∏£';
                case 'preparing': return 'üë®‚Äçüç≥ ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏ó‡∏≥';
                case 'delivering': return 'üöö ‡∏Å‡∏≥‡∏•‡∏±‡∏á‡∏™‡πà‡∏á';
                case 'completed': return '‚úÖ ‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à‡πÅ‡∏•‡πâ‡∏ß';
                default: return status;
            }
        }

        function updateMyOrdersBadge() {
            const customerOrders = systemData.orders.filter(order => 
                order.customerId && order.customerId.startsWith('customer_')
            );
            
            const badge = document.getElementById('myOrdersBadge');
            if (customerOrders.length > 0) {
                badge.textContent = customerOrders.length;
                badge.classList.remove('hidden');
            } else {
                badge.classList.add('hidden');
            }
        }

        function cancelOrder(orderId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                const orderIndex = systemData.orders.findIndex(o => o.id === orderId);
                if (orderIndex !== -1) {
                    systemData.orders.splice(orderIndex, 1);
                    saveData();
                    showMyOrders(); // ‡∏£‡∏µ‡πÄ‡∏ü‡∏£‡∏ä‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£
                    updateMyOrdersBadge();
                    showNotification('‚ùå ‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå', '‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ñ‡∏π‡∏Å‡∏¢‡∏Å‡πÄ‡∏•‡∏¥‡∏Å‡πÅ‡∏•‡πâ‡∏ß');
                    
                    // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï Owner UI ‡∏ñ‡πâ‡∏≤‡πÄ‡∏õ‡∏¥‡∏î‡∏≠‡∏¢‡∏π‡πà
                    if (systemData.currentUser === 'owner') {
                        updateOwnerUI();
                    }
                }
            }
        }

        function closeMyOrders() {
            document.getElementById('myOrdersModal').classList.add('hidden');
        }

        // Owner UI Functions
        function updateOwnerUI() {
            document.getElementById('ownerRestaurantName').textContent = systemData.restaurant.name;
            document.getElementById('restaurantNameInput').value = systemData.restaurant.name;
            document.getElementById('bankAccountNumber').value = systemData.restaurant.bankAccountNumber || '';
            document.getElementById('bankName').value = systemData.restaurant.bankName || '';
            document.getElementById('accountHolderName').value = systemData.restaurant.accountHolderName || '';
            updateOwnerStats();
            updateOwnerOrders();
            updateOwnerMenu();
            updateQRCodePreview();
            updatePaymentQRPreview();
        }

        function updateOwnerStats() {
            const pendingCount = systemData.orders.filter(o => o.status === 'pending').length;
            const completedToday = systemData.orders.filter(o => 
                o.status === 'completed' && 
                new Date(o.timestamp).toDateString() === new Date().toDateString()
            );
            
            const todaySales = completedToday.reduce((sum, order) => sum + order.total, 0);
            
            document.getElementById('todaySales').textContent = todaySales.toLocaleString() + ' ‡∏ø';
            document.getElementById('todayOrders').textContent = completedToday.length;
            document.getElementById('pendingOrders').textContent = pendingCount;
            document.getElementById('totalMenuItems').textContent = systemData.menu.length;
            document.getElementById('orderCount').textContent = systemData.orders.length;
        }

        function updateOwnerOrders() {
            const ordersList = document.getElementById('ordersList');
            const noOrders = document.getElementById('noOrders');
            
            if (systemData.orders.length === 0) {
                ordersList.style.display = 'none';
                noOrders.style.display = 'block';
            } else {
                ordersList.style.display = 'block';
                noOrders.style.display = 'none';
                
                ordersList.innerHTML = systemData.orders.map(order => `
                    <div class="order-card bg-white border-2 border-gray-200 rounded-xl p-6 ${order.status}">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h3 class="text-xl font-bold">‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #${order.id}</h3>
                                <p class="text-gray-600">${new Date(order.timestamp).toLocaleString('th-TH')}</p>
                                <p class="text-gray-700 font-semibold">‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤: ${order.customerName}</p>
                                <p class="text-gray-600">‡πÇ‡∏ó‡∏£: ${order.customerPhone}</p>
                            </div>
                            <div class="text-right">
                                <div class="text-2xl font-bold text-green-600">${order.total.toLocaleString()} ‡∏ø</div>
                                <div class="status-${order.status} text-white px-3 py-1 rounded-full text-sm font-semibold inline-block">
                                    ${getStatusText(order.status)}
                                </div>
                            </div>
                        </div>
                        
                        <div class="mb-4">
                            <h4 class="font-semibold mb-2">‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏≠‡∏≤‡∏´‡∏≤‡∏£:</h4>
                            <div class="space-y-1">
                                ${order.items.map(item => `
                                    <div class="flex justify-between text-sm">
                                        <span>${item.name} x${item.quantity}</span>
                                        <span>${(item.price * item.quantity).toLocaleString()} ‡∏ø</span>
                                    </div>
                                `).join('')}
                            </div>
                        </div>
                        
                        <div class="text-sm text-gray-600 mb-4">
                            <p><strong>‡∏ó‡∏µ‡πà‡∏≠‡∏¢‡∏π‡πà:</strong> ${order.customerAddress}</p>
                            <p><strong>‡∏Å‡∏≤‡∏£‡∏ä‡∏≥‡∏£‡∏∞‡πÄ‡∏á‡∏¥‡∏ô:</strong> ${order.paymentMethod === 'cash' ? '‡πÄ‡∏á‡∏¥‡∏ô‡∏™‡∏î‡∏õ‡∏•‡∏≤‡∏¢‡∏ó‡∏≤‡∏á' : '‡πÇ‡∏≠‡∏ô‡πÄ‡∏á‡∏¥‡∏ô'}</p>
                            ${order.paymentSlip ? `
                                <div class="mt-2">
                                    <strong>‡∏™‡∏•‡∏¥‡∏õ‡∏Å‡∏≤‡∏£‡πÇ‡∏≠‡∏ô:</strong>
                                    <img src="${order.paymentSlip}" alt="Payment Slip" class="mt-1 max-w-xs rounded-lg shadow-lg cursor-pointer" onclick="viewPaymentSlip('${order.paymentSlip}')">
                                </div>
                            ` : ''}
                        </div>
                        
                        <div class="flex space-x-2">
                            ${order.status === 'pending' ? `
                                <button onclick="updateOrderStatus('${order.id}', 'preparing')" class="flex-1 bg-blue-500 text-white py-2 px-4 rounded-lg hover:bg-blue-600 transition-colors">
                                    üë®‚Äçüç≥ ‡πÄ‡∏£‡∏¥‡πà‡∏°‡∏ó‡∏≥
                                </button>
                            ` : order.status === 'preparing' ? `
                                <button onclick="updateOrderStatus('${order.id}', 'delivering')" class="flex-1 bg-purple-500 text-white py-2 px-4 rounded-lg hover:bg-purple-600 transition-colors">
                                    üöö ‡∏™‡πà‡∏á‡∏≠‡∏≠‡∏Å
                                </button>
                            ` : order.status === 'delivering' ? `
                                <button onclick="updateOrderStatus('${order.id}', 'completed')" class="flex-1 bg-green-500 text-white py-2 px-4 rounded-lg hover:bg-green-600 transition-colors">
                                    ‚úÖ ‡∏™‡πà‡∏á‡πÄ‡∏™‡∏£‡πá‡∏à
                                </button>
                            ` : ''}
                            
                            <button onclick="deleteOrder('${order.id}')" class="bg-red-500 text-white py-2 px-4 rounded-lg hover:bg-red-600 transition-colors">
                                üóëÔ∏è ‡∏•‡∏ö
                            </button>
                        </div>
                    </div>
                `).join('');
            }
        }

        function updateOrderStatus(orderId, newStatus) {
            const orderIndex = systemData.orders.findIndex(o => o.id === orderId);
            if (orderIndex !== -1) {
                systemData.orders[orderIndex].status = newStatus;
                
                if (newStatus === 'completed') {
                    systemData.stats.todaySales += systemData.orders[orderIndex].total;
                    systemData.stats.todayOrders += 1;
                }
                
                saveData();
                updateOwnerUI();
                showNotification('‚úÖ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞', `‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå #${orderId} ${getStatusText(newStatus)}`);
            }
        }

        function deleteOrder(orderId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                systemData.orders = systemData.orders.filter(o => o.id !== orderId);
                saveData();
                updateOwnerUI();
                showNotification('üóëÔ∏è ‡∏•‡∏ö‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå', '‡∏≠‡∏≠‡πÄ‡∏î‡∏≠‡∏£‡πå‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß');
            }
        }

        function viewPaymentSlip(slipData) {
            const newWindow = window.open('', '_blank');
            newWindow.document.write(`
                <html>
                    <head><title>‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û</title></head>
                    <body style="margin:0; display:flex; justify-content:center; align-items:center; min-height:100vh; background:#f0f0f0;">
                        <img src="${slipData}" style="max-width:100%; max-height:100%; object-fit:contain;">
                    </body>
                </html>
            `);
        }

        function updateOwnerMenu() {
            const menuList = document.getElementById('ownerMenuList');
            const noMenu = document.getElementById('noMenuOwner');
            
            if (systemData.menu.length === 0) {
                menuList.style.display = 'none';
                noMenu.style.display = 'block';
            } else {
                menuList.style.display = 'grid';
                noMenu.style.display = 'none';
                
                menuList.innerHTML = systemData.menu.map(item => `
                    <div class="menu-card bg-white border-2 border-gray-200 rounded-xl overflow-hidden hover:border-blue-300 transition-colors">
                        <img src="${item.image}" alt="${item.name}" class="w-full h-48 object-cover">
                        <div class="p-4">
                            <h3 class="font-bold text-lg mb-2">${item.name}</h3>
                            <p class="text-gray-600 text-sm mb-2">${item.description}</p>
                            <div class="text-2xl font-bold text-green-600 mb-4">${item.price.toLocaleString()} ‡∏ø</div>
                            
                            <div class="flex space-x-2">
                                <button onclick="editMenu('${item.id}')" class="flex-1 bg-blue-500 text-white py-2 px-3 rounded-lg hover:bg-blue-600 transition-colors text-sm">
                                    ‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç
                                </button>
                                <button onclick="deleteMenu('${item.id}')" class="flex-1 bg-red-500 text-white py-2 px-3 rounded-lg hover:bg-red-600 transition-colors text-sm">
                                    üóëÔ∏è ‡∏•‡∏ö
                                </button>
                            </div>
                        </div>
                    </div>
                `).join('');
            }
        }

        // Tab switching
        function switchTab(tabName) {
            document.querySelectorAll('.tab-content').forEach(content => {
                content.classList.add('hidden');
            });
            
            document.querySelectorAll('.tab-button').forEach(button => {
                button.classList.remove('active', 'bg-blue-50', 'text-blue-600', 'border-b-2', 'border-blue-600');
                button.classList.add('text-gray-600');
            });
            
            document.getElementById(tabName + 'Content').classList.remove('hidden');
            const activeTab = document.getElementById(tabName + 'Tab');
            activeTab.classList.add('active', 'bg-blue-50', 'text-blue-600', 'border-b-2', 'border-blue-600');
            activeTab.classList.remove('text-gray-600');
        }

        // Menu management
        function openAddMenuModal() {
            document.getElementById('menuModalTitle').textContent = '‚ûï ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà';
            document.getElementById('editMenuId').value = '';
            document.getElementById('menuName').value = '';
            document.getElementById('menuDescription').value = '';
            document.getElementById('menuPrice').value = '';
            document.getElementById('menuImage').value = '';
            document.getElementById('imagePreview').classList.add('hidden');
            document.getElementById('menuModal').classList.remove('hidden');
        }

        function editMenu(menuId) {
            const menu = systemData.menu.find(m => m.id === menuId);
            if (menu) {
                document.getElementById('menuModalTitle').textContent = '‚úèÔ∏è ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏°‡∏ô‡∏π';
                document.getElementById('editMenuId').value = menuId;
                document.getElementById('menuName').value = menu.name;
                document.getElementById('menuDescription').value = menu.description;
                document.getElementById('menuPrice').value = menu.price;
                
                if (menu.image) {
                    document.getElementById('previewImg').src = menu.image;
                    document.getElementById('imagePreview').classList.remove('hidden');
                }
                
                document.getElementById('menuModal').classList.remove('hidden');
            }
        }

        function deleteMenu(menuId) {
            if (confirm('‡∏Ñ‡∏∏‡∏ì‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏ô‡∏µ‡πâ‡∏´‡∏£‡∏∑‡∏≠‡πÑ‡∏°‡πà?')) {
                // ‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö
                systemData.menu = systemData.menu.filter(m => m.id !== menuId);
                
                // ‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ï‡∏∞‡∏Å‡∏£‡πâ‡∏≤‡∏Ç‡∏≠‡∏á‡∏•‡∏π‡∏Å‡∏Ñ‡πâ‡∏≤‡∏î‡πâ‡∏ß‡∏¢ (‡∏ñ‡πâ‡∏≤‡∏°‡∏µ)
                systemData.cart = systemData.cart.filter(item => item.id !== menuId);
                
                // ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
                saveData();
                
                // ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï UI ‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
                updateOwnerUI();
                if (systemData.currentUser === 'customer') {
                    updateCustomerUI();
                }
                
                showNotification('üóëÔ∏è ‡∏•‡∏ö‡πÄ‡∏°‡∏ô‡∏π', '‡πÄ‡∏°‡∏ô‡∏π‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÅ‡∏•‡πâ‡∏ß');
            }
        }

        function closeMenuModal() {
            document.getElementById('menuModal').classList.add('hidden');
        }

        // Image preview for menu
        document.addEventListener('change', function(e) {
            if (e.target.id === 'menuImage') {
                const file = e.target.files[0];
                if (file) {
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        document.getElementById('previewImg').src = e.target.result;
                        document.getElementById('imagePreview').classList.remove('hidden');
                    };
                    reader.readAsDataURL(file);
                }
            }
        });

        function saveMenu() {
            const name = document.getElementById('menuName').value.trim();
            const description = document.getElementById('menuDescription').value.trim();
            const price = parseFloat(document.getElementById('menuPrice').value);
            const editId = document.getElementById('editMenuId').value;
            const imageFile = document.getElementById('menuImage').files[0];
            
            if (!name || !price || price <= 0) {
                showNotification('‚ö†Ô∏è ‡∏Å‡∏£‡∏≠‡∏Å‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏ö', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏•‡∏∞‡∏£‡∏≤‡∏Ñ‡∏≤');
                return;
            }
            
            function saveMenuData(imageData) {
                if (editId) {
                    const menuIndex = systemData.menu.findIndex(m => m.id === editId);
                    if (menuIndex !== -1) {
                        systemData.menu[menuIndex] = {
                            ...systemData.menu[menuIndex],
                            name, description, price,
                            image: imageData || systemData.menu[menuIndex].image
                        };
                    }
                } else {
                    const newMenu = {
                        id: Date.now().toString(),
                        name, description, price,
                        image: imageData || 'data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxyZWN0IHdpZHRoPSIxMDAiIGhlaWdodD0iMTAwIiBmaWxsPSIjRkY4QzAwIiByeD0iMTAiLz4KPHN2ZyB4PSIyNSIgeT0iMjUiIHdpZHRoPSI1MCIgaGVpZ2h0PSI1MCI+Cjx0ZXh0IHg9IjUwJSIgeT0iNTAlIiBmb250LXNpemU9IjMwIiBmaWxsPSJ3aGl0ZSIgdGV4dC1hbmNob3I9Im1pZGRsZSIgZG9taW5hbnQtYmFzZWxpbmU9ImNlbnRyYWwiPvCfjZw8L3RleHQ+Cjwvc3ZnPgo8L3N2Zz4K',
                        createdAt: new Date().toISOString()
                    };
                    systemData.menu.push(newMenu);
                }
                
                saveData();
                updateOwnerUI();
                updateCustomerUI();
                closeMenuModal();
                showNotification('üíæ ‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡πÄ‡∏°‡∏ô‡∏π', editId ? '‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÄ‡∏°‡∏ô‡∏π‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢' : '‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏°‡∏ô‡∏π‡πÉ‡∏´‡∏°‡πà‡πÅ‡∏•‡πâ‡∏ß');
            }
            
            if (imageFile) {
                const reader = new FileReader();
                reader.onload = function(e) {
                    saveMenuData(e.target.result);
                };
                reader.readAsDataURL(imageFile);
            } else {
                saveMenuData(null);
            }
        }

        function updateRestaurantSettings() {
            const newName = document.getElementById('restaurantNameInput').value.trim();
            const bankAccount = document.getElementById('bankAccountNumber').value.trim();
            const bankName = document.getElementById('bankName').value.trim();
            const accountHolder = document.getElementById('accountHolderName').value.trim();
            
            if (newName) {
                systemData.restaurant.name = newName;
                systemData.restaurant.bankAccountNumber = bankAccount;
                systemData.restaurant.bankName = bankName;
                systemData.restaurant.accountHolderName = accountHolder;
                
                saveData();
                updateOwnerUI();
                updateCustomerUI();
                showNotification('üè™ ‡∏≠‡∏±‡∏õ‡πÄ‡∏î‡∏ï‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤', '‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡πÅ‡∏õ‡∏•‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ö‡∏£‡πâ‡∏≠‡∏¢');
            } else {
                showNotification('‚ö†Ô∏è ‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô', '‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡∏Å‡∏£‡∏≠‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏£‡πâ‡∏≤‡∏ô‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ô‡πâ‡∏≠‡∏¢');
            }
        }

        // Event Listeners
        document.addEventListener('DOMContentLoaded', function() {
            loadData();
            
            // Tab buttons
            document.getElementById('ordersTab').addEventListener('click', () => switchTab('orders'));
            document.getElementById('menuTab').addEventListener('click', () => switchTab('menu'));
            document.getElementById('settingsTab').addEventListener('click', () => switchTab('settings'));
            
            // Restaurant name input
            document.getElementById('restaurantNameInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    updateRestaurantSettings();
                }
            });
        });

        // Notification system
        function showNotification(title, message, icon = 'üîî') {
            document.getElementById('notificationIcon').textContent = icon;
            document.getElementById('notificationTitle').textContent = title;
            document.getElementById('notificationMessage').textContent = message;
            
            const notification = document.getElementById('notification');
            notification.classList.remove('hidden');
            
            setTimeout(() => {
                notification.classList.add('hidden');
            }, 4000);
        }

        // Special Features Functions
        function openRecipeGuide() {
            const select = document.getElementById('recipeSelect');
            select.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π --</option>';
            
            systemData.menu.forEach(menu => {
                const option = document.createElement('option');
                option.value = menu.id;
                option.textContent = menu.name;
                select.appendChild(option);
            });
            
            document.getElementById('recipeGuideModal').classList.remove('hidden');
        }

        function closeRecipeGuide() {
            document.getElementById('recipeGuideModal').classList.add('hidden');
            document.getElementById('recipeDetails').classList.add('hidden');
        }

        function showRecipeDetails() {
            const menuId = document.getElementById('recipeSelect').value;
            if (!menuId) {
                document.getElementById('recipeDetails').classList.add('hidden');
                return;
            }
            
            const menu = systemData.menu.find(m => m.id === menuId);
            if (!menu) return;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏°‡∏ô‡∏π
            document.getElementById('recipeInfo').innerHTML = `
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">üçΩÔ∏è ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö:</span>
                    <span class="font-semibold">${menu.servingSize || 2} ‡∏Ñ‡∏ô</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">‚è∞ ‡πÄ‡∏ß‡∏•‡∏≤‡∏ó‡∏≥:</span>
                    <span class="font-semibold">${menu.cookingTime || 15} ‡∏ô‡∏≤‡∏ó‡∏µ</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">üìä ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏¢‡∏≤‡∏Å:</span>
                    <span class="font-semibold">${menu.difficulty || '‡∏á‡πà‡∏≤‡∏¢'}</span>
                </div>
                <div class="flex justify-between items-center">
                    <span class="text-gray-600">üí∞ ‡∏£‡∏≤‡∏Ñ‡∏≤:</span>
                    <span class="font-semibold text-green-600">${menu.price} ‡∏ö‡∏≤‡∏ó</span>
                </div>
            `;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö
            if (menu.ingredients) {
                document.getElementById('ingredientsList').innerHTML = menu.ingredients.map(ing => `
                    <div class="flex justify-between items-center bg-white rounded-lg p-3 shadow-sm">
                        <span class="font-medium">${ing.name}</span>
                        <span class="text-green-600 font-semibold">${ing.amount} ${ing.unit}</span>
                    </div>
                `).join('');
            }
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏Ç‡∏±‡πâ‡∏ô‡∏ï‡∏≠‡∏ô
            if (menu.steps) {
                document.getElementById('cookingSteps').innerHTML = menu.steps.map((step, index) => `
                    <div class="flex items-start space-x-3 bg-white rounded-lg p-4 shadow-sm">
                        <div class="bg-orange-500 text-white rounded-full w-8 h-8 flex items-center justify-center font-bold text-sm">
                            ${index + 1}
                        </div>
                        <p class="flex-1">${step}</p>
                    </div>
                `).join('');
            }
            
            // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö
            if (menu.tips) {
                document.getElementById('cookingTips').innerHTML = menu.tips.map(tip => `
                    <div class="flex items-start space-x-3 bg-white rounded-lg p-3 shadow-sm">
                        <span class="text-yellow-500 text-lg">üí°</span>
                        <p class="flex-1">${tip}</p>
                    </div>
                `).join('');
            }
            
            document.getElementById('recipeDetails').classList.remove('hidden');
        }

        function openPortionCalculator() {
            const select = document.getElementById('portionMenuSelect');
            select.innerHTML = '<option value="">-- ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π --</option>';
            
            systemData.menu.forEach(menu => {
                const option = document.createElement('option');
                option.value = menu.id;
                option.textContent = menu.name;
                select.appendChild(option);
            });
            
            document.getElementById('portionCalculatorModal').classList.remove('hidden');
        }

        function closePortionCalculator() {
            document.getElementById('portionCalculatorModal').classList.add('hidden');
            document.getElementById('portionResults').classList.add('hidden');
        }

        function updatePortionCalculation() {
            const menuId = document.getElementById('portionMenuSelect').value;
            const peopleCount = parseInt(document.getElementById('peopleCount').value);
            
            if (!menuId || !peopleCount) {
                document.getElementById('portionResults').classList.add('hidden');
                return;
            }
            
            const menu = systemData.menu.find(m => m.id === menuId);
            if (!menu) return;
            
            const originalServing = menu.servingSize || 2;
            const multiplier = peopleCount / originalServing;
            const totalPrice = Math.ceil(menu.price * multiplier);
            const portions = Math.ceil(multiplier);
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ‡∏ú‡∏•
            document.getElementById('portionSummary').innerHTML = `
                <div class="bg-white rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-blue-600">${peopleCount}</div>
                    <div class="text-sm text-gray-600">‡∏Ñ‡∏ô</div>
                </div>
                <div class="bg-white rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-green-600">${portions}</div>
                    <div class="text-sm text-gray-600">‡∏ä‡∏∏‡∏î</div>
                </div>
                <div class="bg-white rounded-lg p-4 text-center">
                    <div class="text-2xl font-bold text-orange-600">${totalPrice.toLocaleString()}</div>
                    <div class="text-sm text-gray-600">‡∏ö‡∏≤‡∏ó</div>
                </div>
            `;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠
            let shoppingHTML = `
                <div class="bg-white rounded-lg p-4 mb-3">
                    <div class="flex justify-between items-center">
                        <div>
                            <h4 class="font-semibold">${menu.name}</h4>
                            <p class="text-sm text-gray-600">‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö ${peopleCount} ‡∏Ñ‡∏ô</p>
                        </div>
                        <div class="text-right">
                            <div class="font-bold text-green-600">${portions} ‡∏ä‡∏∏‡∏î</div>
                            <div class="text-sm text-gray-600">${totalPrice.toLocaleString()} ‡∏ö‡∏≤‡∏ó</div>
                        </div>
                    </div>
                </div>
            `;
            
            if (menu.ingredients) {
                shoppingHTML += '<div class="bg-gray-50 rounded-lg p-4"><h5 class="font-semibold mb-2">‡∏ß‡∏±‡∏ï‡∏ñ‡∏∏‡∏î‡∏¥‡∏ö‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏° (‡∏ñ‡πâ‡∏≤‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£):</h5>';
                menu.ingredients.forEach(ing => {
                    const newAmount = parseFloat(ing.amount) * multiplier;
                    shoppingHTML += `
                        <div class="flex justify-between text-sm py-1">
                            <span>${ing.name}</span>
                            <span>${newAmount.toFixed(1)} ${ing.unit}</span>
                        </div>
                    `;
                });
                shoppingHTML += '</div>';
            }
            
            document.getElementById('shoppingList').innerHTML = shoppingHTML;
            document.getElementById('portionResults').classList.remove('hidden');
        }

        function addCalculatedToCart() {
            const menuId = document.getElementById('portionMenuSelect').value;
            const peopleCount = parseInt(document.getElementById('peopleCount').value);
            
            if (!menuId || !peopleCount) return;
            
            const menu = systemData.menu.find(m => m.id === menuId);
            if (!menu) return;
            
            const originalServing = menu.servingSize || 2;
            const portions = Math.ceil(peopleCount / originalServing);
            
            // ‡∏ï‡∏±‡πâ‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÉ‡∏ô‡πÄ‡∏°‡∏ô‡∏π
            systemData.menuQuantities[menuId] = portions;
            
            // ‡∏™‡∏±‡πà‡∏á‡πÄ‡∏•‡∏¢
            orderDirectly(menuId);
            
            closePortionCalculator();
        }

        function openPartyPlanner() {
            document.getElementById('partyPlannerModal').classList.remove('hidden');
        }

        function closePartyPlanner() {
            document.getElementById('partyPlannerModal').classList.add('hidden');
            document.getElementById('partyPlanResults').classList.add('hidden');
        }

        function updatePartyPlan() {
            const partyType = document.getElementById('partyType').value;
            const guestCount = parseInt(document.getElementById('guestCount').value);
            const budget = document.getElementById('budget').value;
            
            if (!partyType || !guestCount || !budget) {
                document.getElementById('partyPlanResults').classList.add('hidden');
                return;
            }
            
            // ‡∏Ñ‡∏≥‡∏ô‡∏ß‡∏ì‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡∏ï‡∏≤‡∏°‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì
            let budgetPerPerson;
            switch (budget) {
                case 'low': budgetPerPerson = 150; break;
                case 'medium': budgetPerPerson = 300; break;
                case 'high': budgetPerPerson = 500; break;
            }
            
            const totalBudget = budgetPerPerson * guestCount;
            
            // ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°
            const suitableMenus = systemData.menu.filter(menu => {
                const pricePerPerson = menu.price / (menu.servingSize || 2);
                return pricePerPerson <= budgetPerPerson * 0.8; // ‡πÉ‡∏ä‡πâ 80% ‡∏Ç‡∏≠‡∏á‡∏á‡∏ö
            });
            
            // ‡πÅ‡∏™‡∏î‡∏á‡πÄ‡∏°‡∏ô‡∏π‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥
            let recommendedHTML = '';
            let totalCost = 0;
            
            suitableMenus.forEach(menu => {
                const portions = Math.ceil(guestCount / (menu.servingSize || 2));
                const menuCost = menu.price * portions;
                totalCost += menuCost;
                
                recommendedHTML += `
                    <div class="bg-white rounded-lg p-4 border-2 border-pink-200">
                        <div class="flex justify-between items-start mb-2">
                            <h4 class="font-semibold">${menu.name}</h4>
                            <span class="text-pink-600 font-bold">${portions} ‡∏ä‡∏∏‡∏î</span>
                        </div>
                        <p class="text-sm text-gray-600 mb-2">${menu.description}</p>
                        <div class="flex justify-between text-sm">
                            <span>‡∏£‡∏≤‡∏Ñ‡∏≤: ${menuCost.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
                            <span>‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö: ${portions * (menu.servingSize || 2)} ‡∏Ñ‡∏ô</span>
                        </div>
                    </div>
                `;
            });
            
            document.getElementById('recommendedMenu').innerHTML = recommendedHTML;
            
            // ‡πÅ‡∏™‡∏î‡∏á‡∏™‡∏£‡∏∏‡∏õ
            document.getElementById('partySummary').innerHTML = `
                <div class="bg-white rounded-lg p-4">
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-600">‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡πÅ‡∏Ç‡∏Å:</span>
                        <span class="font-semibold">${guestCount} ‡∏Ñ‡∏ô</span>
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-600">‡∏á‡∏ö‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì:</span>
                        <span class="font-semibold">${totalBudget.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
                    </div>
                    <div class="flex justify-between items-center mb-2">
                        <span class="text-gray-600">‡∏Ñ‡πà‡∏≤‡πÉ‡∏ä‡πâ‡∏à‡πà‡∏≤‡∏¢‡∏à‡∏£‡∏¥‡∏á:</span>
                        <span class="font-semibold text-green-600">${totalCost.toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
                    </div>
                    <div class="flex justify-between items-center">
                        <span class="text-gray-600">‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏à‡∏≤‡∏Å‡∏á‡∏ö:</span>
                        <span class="font-semibold text-blue-600">${(totalBudget - totalCost).toLocaleString()} ‡∏ö‡∏≤‡∏ó</span>
                    </div>
                </div>
            `;
            
            // ‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö‡∏ï‡∏≤‡∏°‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡∏á‡∏≤‡∏ô
            const tips = {
                birthday: [
                    'üéÇ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏Ñ‡πâ‡∏Å‡∏ß‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡πÄ‡∏õ‡πá‡∏ô‡∏û‡∏¥‡πÄ‡∏®‡∏©',
                    'üéà ‡∏à‡∏±‡∏î‡πÇ‡∏ï‡πä‡∏∞‡πÉ‡∏´‡πâ‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏ö‡∏≠‡∏•‡∏•‡∏π‡∏ô',
                    'üì∏ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏°‡∏∏‡∏°‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ',
                    'üéµ ‡πÄ‡∏õ‡∏¥‡∏î‡πÄ‡∏û‡∏•‡∏á‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®'
                ],
                wedding: [
                    'üíí ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏´‡∏£‡∏π‡∏´‡∏£‡∏≤‡πÅ‡∏•‡∏∞‡∏™‡∏ß‡∏¢‡∏á‡∏≤‡∏°',
                    'üåπ ‡∏ï‡∏Å‡πÅ‡∏ï‡πà‡∏á‡πÇ‡∏ï‡πä‡∏∞‡∏î‡πâ‡∏ß‡∏¢‡∏î‡∏≠‡∏Å‡πÑ‡∏°‡πâ',
                    'üìã ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏£‡∏≤‡∏¢‡∏ä‡∏∑‡πà‡∏≠‡πÅ‡∏Ç‡∏Å‡∏•‡πà‡∏ß‡∏á‡∏´‡∏ô‡πâ‡∏≤',
                    'ü•Ç ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏Ç‡∏ô‡∏°‡∏õ‡∏±‡∏á'
                ],
                office: [
                    'üè¢ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏Å‡∏¥‡∏ô‡∏á‡πà‡∏≤‡∏¢ ‡πÑ‡∏°‡πà‡πÄ‡∏•‡∏≠‡∏∞‡πÄ‡∏ó‡∏≠‡∏∞',
                    '‚è∞ ‡∏à‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤‡πÉ‡∏´‡πâ‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏Å‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô',
                    'üçΩÔ∏è ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏à‡∏≤‡∏ô‡πÅ‡∏•‡∏∞‡∏ä‡πâ‡∏≠‡∏ô‡∏™‡πâ‡∏≠‡∏°‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏û‡∏≠',
                    'üßπ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏≠‡∏∏‡∏õ‡∏Å‡∏£‡∏ì‡πå‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î'
                ],
                family: [
                    'üë®‚Äçüë©‚Äçüëß‚Äçüë¶ ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡πÄ‡∏î‡πá‡∏Å‡∏ä‡∏≠‡∏ö‡∏î‡πâ‡∏ß‡∏¢',
                    'üè† ‡∏à‡∏±‡∏î‡∏ó‡∏µ‡πà‡∏ô‡∏±‡πà‡∏á‡πÉ‡∏´‡πâ‡∏™‡∏ö‡∏≤‡∏¢‡πÅ‡∏•‡∏∞‡∏≠‡∏ö‡∏≠‡∏∏‡πà‡∏ô',
                    'üéÆ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡∏Å‡∏¥‡∏à‡∏Å‡∏£‡∏£‡∏°‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÄ‡∏î‡πá‡∏Å',
                    'üì± ‡∏ñ‡πà‡∏≤‡∏¢‡∏£‡∏π‡∏õ‡πÄ‡∏Å‡πá‡∏ö‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏£‡∏á‡∏à‡∏≥'
                ],
                friends: [
                    'üë• ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡πÄ‡∏°‡∏ô‡∏π‡∏ó‡∏µ‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏ô‡∏ä‡∏≠‡∏ö',
                    'üéâ ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏£‡∏£‡∏¢‡∏≤‡∏Å‡∏≤‡∏®‡∏™‡∏ô‡∏∏‡∏Å‡∏™‡∏ô‡∏≤‡∏ô',
                    'üé≤ ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏Å‡∏°‡∏™‡πå‡πÄ‡∏•‡πà‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏±‡∏ô',
                    'üçª ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏°‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏î‡∏∑‡πà‡∏°‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏≤‡∏Å‡∏´‡∏•‡∏≤‡∏¢'
                ]
            };
            
            const partyTipsHTML = tips[partyType]?.map(tip => `
                <div class="bg-white rounded-lg p-3 shadow-sm">
                    <p class="text-sm">${tip}</p>
                </div>
            `).join('') || '';
            
            document.getElementById('partyTips').innerHTML = partyTipsHTML;
            document.getElementById('partyPlanResults').classList.remove('hidden');
        }

        function addPartyMenuToCart() {
            const partyType = document.getElementById('partyType').value;
            const guestCount = parseInt(document.getElementById('guestCount').value);
            const budget = document.getElementById('budget').value;
            
            if (!partyType || !guestCount || !budget) return;
            
            let budgetPerPerson;
            switch (budget) {
                case 'low': budgetPerPerson = 150; break;
                case 'medium': budgetPerPerson = 300; break;
                case 'high': budgetPerPerson = 500; break;
            }
            
            const suitableMenus = systemData.menu.filter(menu => {
                const pricePerPerson = menu.price / (menu.servingSize || 2);
                return pricePerPerson <= budgetPerPerson * 0.8;
            });
            
            // ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏™‡∏±‡πà‡∏á‡∏ã‡∏∑‡πâ‡∏≠‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏õ‡∏≤‡∏£‡πå‡∏ï‡∏µ‡πâ
            const partyItems = [];
            suitableMenus.forEach(menu => {
                const portions = Math.ceil(guestCount / (menu.servingSize || 2));
                partyItems.push({
                    id: menu.id,
                    name: menu.name,
                    price: menu.price,
                    image: menu.image,
                    quantity: portions
                });
            });
            
            if (partyItems.length > 0) {
                openDirectOrderModal(partyItems);
            }
            
            closePartyPlanner();
        }

        // Real-time updates simulation
        setInterval(() => {
            if (systemData.currentUser === 'owner') {
                updateOwnerStats();
            } else if (systemData.currentUser === 'customer') {
                updateMyOrdersBadge();
            }
        }, 5000);
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'97f70d22a37b8bcf',t:'MTc1NzkyODA1OS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
